import{c as E,m as P,r as o,u as S,j as e,n as j,i as w,k as N}from"./index-DGx1GHu3.js";import{C as i}from"./circle-arrow-right-3pUredv7.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=E("MoveLeft",[["path",{d:"M6 8L2 12L6 16",key:"kyvwex"}],["path",{d:"M2 12H22",key:"1m8cig"}]]),M=()=>{const{orgId:m}=P(),[l,p]=o.useState(1),[h,g]=o.useState(!1),[b,y]=o.useState(""),[f,x]=o.useState(""),[t,u]=o.useState({name:"",description:"",joinCode:"",logo:null,website:"",socialLinks:"",address:"",brandColor:"",isPublic:null});o.useEffect(()=>{(async()=>{try{const a=localStorage.getItem("authToken"),{data:s}=await w.get(`${N}organizations/${m}`,{headers:{Authorization:a}});u({name:s.name||"",description:s.description||"",joinCode:s.joinCode||"",logo:null,website:s.website||"",socialLinks:s.socialLinks||"",address:s.address||"",brandColor:s.brandColor||"#000000",isPublic:s.isPublic})}catch(a){console.error(a),x("Failed to fetch organization data")}})()},[m]);const v=async n=>{n.preventDefault(),g(!0);try{const a=new FormData;Object.entries(t).forEach(([c,d])=>{d!==null&&a.append(c,d)});const s=localStorage.getItem("authToken");await w.patch(`${N}organizations/${m}`,a,{headers:{"Content-Type":"multipart/form-data",Authorization:s}}),y("Organization updated successfully"),x("")}catch(a){console.error(a),x("Error updating organization")}finally{g(!1)}},r=n=>{const{name:a,value:s,type:c,files:d,checked:L}=n.target;u(a==="isPublic"?{...t,[a]:s==="true"}:{...t,[a]:c==="file"?d[0]:c==="checkbox"?L:s})},k=S(),C=()=>p(n=>n+1),z=()=>p(n=>n-1);return e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-center items-center dark:bg-slate-900",children:[e.jsxs("div",{className:"p-6 mx-auto bg-white shadow rounded w-full md:w-1/2",children:[e.jsxs("div",{className:"flex w-full justify-between items-center",children:[e.jsx("div",{onClick:()=>k(-1),children:e.jsx(O,{className:"text-[#003366]"})}),e.jsx("h2",{className:"font-kanit mb-4 text-center text-lg font-semibold text-[#003366]",children:"EDIT ORGANIZATION"}),e.jsx("div",{})]}),b&&e.jsx("p",{className:"mb-2 text-center text-sm text-green-600",children:b}),f&&e.jsx("p",{className:"mb-2 text-center text-sm text-red-500",children:f}),e.jsxs("form",{className:"space-y-4",children:[l===1&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-[#003366] font-semibold text-center text-sm",children:"Essential Information"}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(i,{className:"text-[#003366]",size:16}),e.jsx("input",{type:"text",name:"name",value:t.name,onChange:r,className:"w-full text-sm decoration-none outline-none",placeholder:"Enter organization name"})]}),e.jsx("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:e.jsx("textarea",{name:"description",value:t.description,onChange:r,className:"w-full text-sm decoration-none outline-none",placeholder:"Enter organization description",rows:4})}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(j,{className:"text-[#003366]",size:16}),e.jsx("input",{type:"text",name:"joinCode",value:t.joinCode,onChange:r,className:"w-full text-sm decoration-none outline-none",placeholder:"Enter Join Code, if any"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-30 border-2 border-dashed rounded-lg cursor-pointer bg-gray-50 hover:bg-gray-100 dark:bg-slate-800 dark:border-slate-600 dark:hover:bg-slate-700 transition",children:[t.logo?e.jsx("img",{src:URL.createObjectURL(t.logo),alt:"Logo Preview",className:"h-full object-contain"}):e.jsxs("div",{className:"flex flex-col items-center justify-center pt-5 pb-6 text-center",children:[e.jsx("svg",{className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16V4a1 1 0 011-1h8a1 1 0 011 1v12M5 20h14a1 1 0 001-1v-4a1 1 0 00-1-1H5a1 1 0 00-1 1v4a1 1 0 001 1z"})}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-300",children:e.jsx("span",{className:"font-semibold",children:"Click to upload organization logo"})}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"PNG, JPG, JPEG (max. 2MB)"})]}),e.jsx("input",{type:"file",name:"logo",accept:"image/*",onChange:r,className:"hidden"})]})})]}),l===2&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-[#003366] font-semibold text-center text-sm",children:"Branding"}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(i,{className:"text-[#003366]",size:16}),e.jsx("input",{type:"text",name:"website",value:t.website,onChange:r,className:"w-full text-sm decoration-none outline-none bg-transparent",placeholder:"Enter website URL"})]}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(i,{className:"text-[#003366]",size:16}),e.jsx("input",{type:"text",name:"socialLinks",value:t.socialLinks,onChange:r,className:"w-full text-sm decoration-none outline-none bg-transparent",placeholder:"Enter social media links (comma-separated)"})]}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(i,{className:"text-[#003366]",size:16}),e.jsx("input",{type:"text",name:"address",value:t.address,onChange:r,className:"w-full text-sm decoration-none outline-none bg-transparent",placeholder:"Enter organization address"})]}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx(i,{className:"text-[#003366]",size:16}),e.jsx("label",{className:"text-sm text-slate-400 mr-2 whitespace-nowrap",children:"Brand Color:"})]}),e.jsx("input",{type:"color",name:"brandColor",value:t.brandColor,onChange:r,className:"w-10 h-6 p-0 border-none bg-transparent cursor-pointer"})]})]}),l===3&&e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"text-[#003366] font-semibold text-center text-sm",children:"Security / Access Control"}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(j,{className:"text-[#003366]",size:16}),e.jsxs("select",{name:"isPublic",value:t.isPublic,onChange:r,className:"w-full text-sm decoration-none outline-none bg-transparent",children:[e.jsx("option",{value:"",children:"Select access type"}),e.jsx("option",{value:"true",children:"Public - Anyone can join"}),e.jsx("option",{value:"false",children:"Private - Only with a join code"})]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[l>1&&e.jsx("button",{type:"button",onClick:z,className:"px-4 py-2 bg-gray-300 rounded hover:bg-gray-400",children:"Back"}),l<3?e.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 bg-[#003366] text-white rounded hover:bg-[#0055aa]",children:"Next"}):e.jsx("button",{onClick:n=>v(n),className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",disabled:h,children:h?e.jsx("div",{className:"w-5 h-5 border-2 border-t border-white rounded-full animate-spin"}):"Update Organization"})]})]}),e.jsx("div",{className:"w-full md:w-1/2"})]})};export{M as default};
