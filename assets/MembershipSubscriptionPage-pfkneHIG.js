import{c as p,r as i,u as P,i as $,k as F,j as e,a as j,U as T,W as C,C as E}from"./index-BDnvDzac.js";import{C as S}from"./circle-check-big-DEEcMiYc.js";import{D as U}from"./dollar-sign-DdhVTiv4.js";import{C as W}from"./clock-KWIRR9pZ.js";import{C as q}from"./chevron-right-B252sZ9H.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=p("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=p("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=p("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),O=()=>{var B;const[f,z]=i.useState([]),[s,g]=i.useState(null),[w,v]=i.useState(!1),[r,c]=i.useState({type:"",text:""}),[n,x]=i.useState(""),A=P();i.useEffect(()=>{k()},[]);const k=async()=>{try{const a=localStorage.getItem("authToken"),t=await $.get(`${F}organizations`,{headers:{Authorization:a}});z(t.data)}catch(a){console.error("Failed to load memberships",a),c({type:"error",text:"Failed to load memberships"})}},D=async a=>{var t,o;if(!s){c({type:"error",text:"Please select a membership"});return}v(!0),c({type:"",text:""});try{const l=localStorage.getItem("authToken"),b=a==="subscribe"?"subscribe":"renew",u={membershipId:s._id,amount:s.membershipFee,method:"wallet"},y=await $.post(`${F}memberships/${b}`,u,{headers:{Authorization:l}});c({type:"success",text:y.data.message||`${a==="subscribe"?"Subscription":"Renewal"} successful!`}),k(),g(null),x("")}catch(l){console.error(`${a} error:`,l),c({type:"error",text:((o=(t=l.response)==null?void 0:t.data)==null?void 0:o.error)||`Failed to ${a} membership`})}finally{v(!1)}},h=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",I=a=>{const t={active:"bg-emerald-100 text-emerald-800 border border-emerald-200",pending:"bg-amber-100 text-amber-800 border border-amber-200",inactive:"bg-gray-100 text-gray-800 border border-gray-200"};return e.jsx("span",{className:`px-2.5 py-1 rounded-full text-xs font-medium uppercase tracking-wide ${t[a]||"bg-gray-100 text-gray-800"}`,children:a})},d=({children:a,onClick:t,variant:o="primary",disabled:l=!1,className:b="",size:u="md"})=>{const y="inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 rounded-lg",R={sm:"px-3 py-1.5 text-xs",md:"px-4 py-2.5 text-sm",lg:"px-6 py-3 text-base"},L={primary:"bg-gray-900 text-white hover:bg-gray-800 focus:ring-gray-500 border border-gray-900",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500",success:"bg-emerald-600 text-white hover:bg-emerald-700 focus:ring-emerald-500 border border-emerald-600",outline:"bg-transparent text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-gray-500",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 focus:ring-gray-500"};return e.jsx("button",{onClick:t,disabled:l,className:`${y} ${R[u]} ${L[o]} ${l?"opacity-50 cursor-not-allowed":""} ${b}`,children:a})};return n?e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsxs(d,{variant:"ghost",onClick:()=>x(""),className:"mb-6 !px-2 !py-1.5 text-sm text-gray-600",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Back to memberships"]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"bg-gray-900 px-6 py-6 text-white",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx("div",{className:"bg-white/10 p-3 rounded-lg",children:n==="subscribe"?e.jsx(j,{className:"h-6 w-6"}):e.jsx(N,{className:"h-6 w-6"})})}),e.jsx("h2",{className:"text-xl font-semibold text-center mb-2",children:n==="subscribe"?"Subscribe to Membership":"Renew Membership"}),e.jsx("p",{className:"text-gray-300 text-center text-sm max-w-md mx-auto",children:n==="subscribe"?"Join the organization and access exclusive features":"Continue your membership and maintain full access"})]}),e.jsxs("div",{className:"p-6",children:[r.text&&e.jsx("div",{className:`p-4 rounded-lg mb-6 border ${r.type==="error"?"bg-red-50 text-red-800 border-red-200":"bg-emerald-50 text-emerald-800 border-emerald-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[r.type==="error"?e.jsx(m,{className:"h-4 w-4 mr-3 flex-shrink-0"}):e.jsx(S,{className:"h-4 w-4 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:r.text})]})}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[e.jsx(T,{className:"h-5 w-5 mr-2 text-gray-600"}),(B=s==null?void 0:s.organizationId)==null?void 0:B.name]}),e.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[e.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(U,{className:"h-4 w-4 text-gray-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Membership Fee"})]}),e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["$",s==null?void 0:s.membershipFee]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 text-gray-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Wallet Balance"})]}),e.jsxs("span",{className:`text-lg font-semibold ${(s==null?void 0:s.walletBalance)>=(s==null?void 0:s.membershipFee)?"text-emerald-600":"text-red-600"}`,children:["$",s==null?void 0:s.walletBalance]})]})}),(s==null?void 0:s.nextBillingDate)&&e.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-4 w-4 text-gray-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Next Billing Date"})]}),e.jsx("span",{className:"font-medium text-gray-900",children:h(s.nextBillingDate)})]})})]})]}),(s==null?void 0:s.walletBalance)<(s==null?void 0:s.membershipFee)&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(m,{className:"h-4 w-4 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-red-800 text-sm",children:"Insufficient Balance"}),e.jsxs("p",{className:"text-red-700 text-xs mt-1",children:["Your wallet balance is insufficient. Please add $",(s==null?void 0:s.membershipFee)-(s==null?void 0:s.walletBalance)," ","more to proceed."]})]})]})}),e.jsx(d,{onClick:()=>D(n),disabled:w||(s==null?void 0:s.walletBalance)<(s==null?void 0:s.membershipFee),className:"w-full",variant:(s==null?void 0:s.walletBalance)>=(s==null?void 0:s.membershipFee)?"success":"primary",size:"lg",children:w?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Processing..."]}):n==="subscribe"?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Subscribe Now - $",s==null?void 0:s.membershipFee]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Renew Membership - $",s==null?void 0:s.membershipFee]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-semibold text-gray-900 mb-2",children:"Membership Management"}),e.jsx("p",{className:"text-gray-600 text-sm max-w-2xl mx-auto",children:"Manage your organization memberships and subscriptions"})]}),r.text&&e.jsx("div",{className:`p-4 rounded-lg mb-6 border max-w-4xl mx-auto ${r.type==="error"?"bg-red-50 text-red-800 border-red-200":"bg-emerald-50 text-emerald-800 border-emerald-200"}`,children:e.jsxs("div",{className:"flex items-center",children:[r.type==="error"?e.jsx(m,{className:"h-4 w-4 mr-3 flex-shrink-0"}):e.jsx(S,{className:"h-4 w-4 mr-3 flex-shrink-0"}),e.jsx("p",{className:"text-sm",children:r.text})]})}),e.jsx("div",{className:"space-y-4",children:f.length===0?e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden max-w-2xl mx-auto",children:e.jsxs("div",{className:"text-center py-12 px-8",children:[e.jsx("div",{className:"bg-gray-100 rounded-full p-4 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:e.jsx(C,{className:"h-8 w-8 text-gray-500"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No memberships found"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"You haven't joined any organizations yet."})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:f.map(a=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200",children:[e.jsx("div",{className:"border-b border-gray-200 px-6 py-4",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-1",children:a.organizationId.name}),e.jsxs("div",{className:"flex items-center text-gray-500 text-xs",children:[e.jsx(W,{className:"h-3 w-3 mr-1"}),"Member since ",h(a.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[I(a.subscriptionStatus),e.jsx("span",{className:"text-xs text-gray-500 capitalize",children:a.role})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium uppercase tracking-wide mb-1",children:"Fee"}),e.jsxs("p",{className:"text-lg font-semibold text-gray-900",children:["$",a.membershipFee]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium uppercase tracking-wide mb-1",children:"Balance"}),e.jsxs("p",{className:`text-lg font-semibold ${a.walletBalance>=a.membershipFee?"text-emerald-600":"text-red-600"}`,children:["$",a.walletBalance]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-600 font-medium uppercase tracking-wide mb-1",children:"Next Bill"}),e.jsx("p",{className:"text-sm font-medium text-gray-900",children:a.nextBillingDate?h(a.nextBillingDate):"N/A"})]})]}),a.walletBalance<a.membershipFee&&e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(m,{className:"h-4 w-4 text-red-500 mr-2 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-red-800",children:"Insufficient Balance"}),e.jsxs("p",{className:"text-xs text-red-700 mt-1",children:["Add $",a.membershipFee-a.walletBalance," ","more to"," ",a.subscriptionStatus!=="active"?"subscribe":"renew","."]})]})]})}),e.jsxs("div",{className:"flex gap-2",children:[a.subscriptionStatus!=="active"?e.jsxs(d,{onClick:()=>{g(a),x("subscribe")},disabled:a.walletBalance<a.membershipFee,className:"flex-1",variant:"success",size:"sm",children:[e.jsx(j,{className:"h-3 w-3 mr-1"}),"Subscribe"]}):e.jsxs(d,{variant:"outline",onClick:()=>{g(a),x("renew")},disabled:a.walletBalance<a.membershipFee,className:"flex-1",size:"sm",children:[e.jsx(N,{className:"h-3 w-3 mr-1"}),"Renew"]}),e.jsx(d,{variant:"ghost",onClick:()=>A("/dashboard/transactions"),className:"flex-initial",size:"sm",children:e.jsx(q,{className:"h-3 w-3"})})]})]})]},a._id))})})]})})};export{O as default};
