import{r,I as f,u as j,j as e,i as y,k as g}from"./index-D5f-0FKg.js";import{B as n}from"./button-BcC4e5ax.js";import{A as p}from"./arrow-left-CllXY12C.js";import{C as b}from"./circle-check-big-B3LK5HsJ.js";const S=()=>{const[a,d]=r.useState(null),[x,h]=r.useState(!0),[i,c]=r.useState(""),l=f(),s=j();return r.useEffect(()=>{(async()=>{var o;try{const t=(o=l.state)==null?void 0:o.transactionId;if(!t){s("/dashboard/membership");return}const u=localStorage.getItem("authToken"),m=await y.get(`${g}payments/verify/${t}`,{headers:{Authorization:u}});m.data.success?d(m.data):c("Payment verification failed")}catch(t){console.error("Payment verification error:",t),c("Failed to verify payment. Please check your transactions.")}finally{h(!1)}})()},[l,s]),x?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{children:"Verifying your payment..."})]})}):i?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"⚠️"}),e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Payment Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:i}),e.jsxs(n,{onClick:()=>s("/dashboard/membership"),children:[e.jsx(p,{className:"mr-2 h-4 w-4"}),"Back to Memberships"]})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsx("div",{className:"bg-white p-8 rounded-lg shadow-lg max-w-md w-full mx-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx(b,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your wallet has been topped up successfully."}),a&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsx("div",{className:"text-gray-600",children:"Amount:"}),e.jsxs("div",{className:"font-medium",children:["$",a.amount]}),e.jsx("div",{className:"text-gray-600",children:"Transaction ID:"}),e.jsx("div",{className:"font-medium text-xs",children:a.transactionId}),e.jsx("div",{className:"text-gray-600",children:"Date:"}),e.jsx("div",{className:"font-medium",children:new Date(a.date).toLocaleDateString()})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(n,{variant:"outline",onClick:()=>s("/dashboard/transactions"),children:"View Transactions"}),e.jsx(n,{onClick:()=>s("/dashboard/membership"),children:"Back to Memberships"})]})]})})})};export{S as default};
