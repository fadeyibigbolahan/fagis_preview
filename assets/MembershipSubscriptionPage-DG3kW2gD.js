import{c as w,r as i,u as P,i as F,k as S,j as e,a as j,U as W,W as p,C}from"./index-DGx1GHu3.js";import{C as z}from"./circle-check-big-BoqqL80H.js";import{D as A}from"./dollar-sign-D8xqh-LN.js";import{C as U}from"./clock-KFP3Crw5.js";import{C as q}from"./chevron-right-CyiRupcX.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=w("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=w("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=w("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),K=()=>{var $;const[v,D]=i.useState([]),[s,h]=i.useState(null),[y,k]=i.useState(!1),[r,o]=i.useState({type:"",text:""}),[n,c]=i.useState(""),I=P();i.useEffect(()=>{B()},[]);const B=async()=>{try{const t=localStorage.getItem("authToken"),a=await F.get(`${S}organizations`,{headers:{Authorization:t}});D(a.data)}catch(t){console.error("Failed to load memberships",t),o({type:"error",text:"Failed to load memberships"})}},R=async t=>{var a,x;if(!s){o({type:"error",text:"Please select a membership"});return}k(!0),o({type:"",text:""});try{const l=localStorage.getItem("authToken"),u=t==="subscribe"?"subscribe":"renew",b={membershipId:s._id,amount:s.membershipFee,method:"wallet"},f=await F.post(`${S}memberships/${u}`,b,{headers:{Authorization:l}});o({type:"success",text:f.data.message||`${t==="subscribe"?"Subscription":"Renewal"} successful!`}),B(),h(null),c("")}catch(l){console.error(`${t} error:`,l),o({type:"error",text:((x=(a=l.response)==null?void 0:a.data)==null?void 0:x.error)||`Failed to ${t} membership`})}finally{k(!1)}},g=t=>t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",E=t=>{const a={active:"bg-gradient-to-r from-green-500 to-emerald-500 text-white shadow-sm",pending:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white shadow-sm",inactive:"bg-gradient-to-r from-red-500 to-pink-500 text-white shadow-sm"};return e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-wide ${a[t]||"bg-gray-500 text-white"}`,children:t})},d=({children:t,onClick:a,variant:x="default",disabled:l=!1,className:u="",size:b="md"})=>{const f="inline-flex items-center justify-center font-semibold transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 transform hover:scale-[1.02] active:scale-[0.98]",L={sm:"px-3 py-1.5 text-sm rounded-md",md:"px-4 py-2.5 text-sm rounded-lg",lg:"px-6 py-3 text-base rounded-lg"},T={default:"bg-gradient-to-r from-blue-600 to-indigo-600 text-white hover:from-blue-700 hover:to-indigo-700 focus:ring-blue-500 shadow-lg hover:shadow-xl",outline:"border-2 border-gray-300 text-gray-700 bg-white hover:bg-gray-50 hover:border-gray-400 focus:ring-blue-500 shadow-sm hover:shadow-md",ghost:"text-gray-700 hover:bg-gray-100 hover:text-gray-900 focus:ring-blue-500 rounded-lg",destructive:"bg-gradient-to-r from-red-600 to-pink-600 text-white hover:from-red-700 hover:to-pink-700 focus:ring-red-500 shadow-lg hover:shadow-xl",success:"bg-gradient-to-r from-green-600 to-emerald-600 text-white hover:from-green-700 hover:to-emerald-700 focus:ring-green-500 shadow-lg hover:shadow-xl"};return e.jsx("button",{onClick:a,disabled:l,className:`${f} ${L[b]} ${T[x]} ${l?"opacity-50 cursor-not-allowed transform-none hover:scale-100":""} ${u}`,children:t})};return n?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 py-4 sm:py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs(d,{variant:"ghost",onClick:()=>c(""),className:"mb-6 !justify-start !p-2",children:[e.jsx(Y,{className:"h-4 w-4 mr-2"}),"Back to memberships"]}),e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 sm:px-8 py-8 text-white",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:n==="subscribe"?e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(j,{className:"h-8 w-8"})}):e.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:e.jsx(N,{className:"h-8 w-8"})})}),e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-2",children:n==="subscribe"?"Subscribe to Membership":"Renew Membership"}),e.jsx("p",{className:"text-blue-100 text-center text-sm sm:text-base max-w-md mx-auto",children:n==="subscribe"?"Join the organization and access exclusive features and benefits":"Continue your membership journey and maintain full access"})]}),e.jsxs("div",{className:"p-6 sm:p-8",children:[r.text&&e.jsx("div",{className:`p-4 rounded-xl mb-6 border-l-4 ${r.type==="error"?"bg-red-50 text-red-800 border-red-500":"bg-green-50 text-green-800 border-green-500"}`,children:e.jsxs("div",{className:"flex items-center",children:[r.type==="error"?e.jsx(m,{className:"h-5 w-5 mr-3 flex-shrink-0"}):e.jsx(z,{className:"h-5 w-5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:r.type==="error"?"Error":"Success"}),e.jsx("p",{className:"text-sm mt-1",children:r.text})]})]})}),e.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 rounded-xl p-6 mb-6 border border-gray-200",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex items-center",children:[e.jsx(W,{className:"h-5 w-5 mr-2 text-blue-600"}),($=s==null?void 0:s.organizationId)==null?void 0:$.name]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(A,{className:"h-5 w-5 text-green-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Membership Fee"})]}),e.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["$",s==null?void 0:s.membershipFee]})]})}),e.jsx("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(p,{className:"h-5 w-5 text-blue-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Wallet Balance"})]}),e.jsxs("span",{className:`text-xl font-bold ${(s==null?void 0:s.walletBalance)>=(s==null?void 0:s.membershipFee)?"text-green-600":"text-red-600"}`,children:["$",s==null?void 0:s.walletBalance]})]})})]}),(s==null?void 0:s.nextBillingDate)&&e.jsx("div",{className:"mt-4 bg-white rounded-lg p-4 border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-5 w-5 text-purple-600 mr-2"}),e.jsx("span",{className:"text-sm text-gray-600",children:"Next Billing Date"})]}),e.jsx("span",{className:"font-semibold text-gray-900",children:g(s.nextBillingDate)})]})})]}),(s==null?void 0:s.walletBalance)<(s==null?void 0:s.membershipFee)&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(m,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-red-800",children:"Insufficient Balance"}),e.jsxs("p",{className:"text-red-700 text-sm mt-1",children:["Your wallet balance is insufficient to complete this transaction. Please add",e.jsxs("span",{className:"font-semibold",children:[" ","$",(s==null?void 0:s.membershipFee)-(s==null?void 0:s.walletBalance)," "]}),"more to proceed."]})]})]})}),e.jsx(d,{onClick:()=>R(n),disabled:y||(s==null?void 0:s.walletBalance)<(s==null?void 0:s.membershipFee),className:"w-full !py-4 text-base",variant:(s==null?void 0:s.walletBalance)>=(s==null?void 0:s.membershipFee)?"success":"default",size:"lg",children:y?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Processing..."]}):n==="subscribe"?e.jsxs(e.Fragment,{children:[e.jsx(j,{className:"h-5 w-5 mr-3"}),"Subscribe Now - $",s==null?void 0:s.membershipFee]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"h-5 w-5 mr-3"}),"Renew Membership - $",s==null?void 0:s.membershipFee]})})]})]})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-50 py-4 sm:py-8 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8 sm:mb-12",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:e.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold mb-4",children:"Membership Management"})}),e.jsx("p",{className:"text-gray-600 text-base sm:text-lg max-w-2xl mx-auto",children:"Manage your organization memberships, track subscriptions, and maintain access to exclusive features"})]}),r.text&&e.jsx("div",{className:`p-4 rounded-xl mb-6 border-l-4 max-w-4xl mx-auto ${r.type==="error"?"bg-red-50 text-red-800 border-red-500":"bg-green-50 text-green-800 border-green-500"}`,children:e.jsxs("div",{className:"flex items-center",children:[r.type==="error"?e.jsx(m,{className:"h-5 w-5 mr-3 flex-shrink-0"}):e.jsx(z,{className:"h-5 w-5 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:r.type==="error"?"Error":"Success"}),e.jsx("p",{className:"text-sm mt-1",children:r.text})]})]})}),e.jsx("div",{className:"space-y-6",children:v.length===0?e.jsx("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden max-w-2xl mx-auto",children:e.jsxs("div",{className:"text-center py-16 px-8",children:[e.jsx("div",{className:"bg-gradient-to-r from-gray-100 to-gray-200 rounded-full p-6 w-24 h-24 mx-auto mb-6 flex items-center justify-center",children:e.jsx(p,{className:"h-12 w-12 text-gray-500"})}),e.jsx("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3",children:"No memberships found"}),e.jsx("p",{className:"text-gray-600 text-base",children:"You haven't joined any organizations yet. Start exploring and find the perfect community for you!"})]})}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:v.map(t=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1",children:[e.jsxs("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-6 text-white relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 to-indigo-600/20"}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 pr-4",children:t.organizationId.name}),e.jsxs("div",{className:"flex items-center text-gray-300 text-sm",children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Member since ",g(t.createdAt)]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[E(t.subscriptionStatus),e.jsx("span",{className:"px-3 py-1 rounded-full text-xs font-medium border border-white/30 text-white capitalize",children:t.role})]})]})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl p-4 border border-green-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-green-700 font-medium uppercase tracking-wide",children:"Membership Fee"}),e.jsxs("p",{className:"text-2xl font-bold text-green-800 mt-1",children:["$",t.membershipFee]})]}),e.jsx(A,{className:"h-8 w-8 text-green-600"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl p-4 border border-blue-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-blue-700 font-medium uppercase tracking-wide",children:"Wallet Balance"}),e.jsxs("p",{className:`text-2xl font-bold mt-1 ${t.walletBalance>=t.membershipFee?"text-blue-800":"text-red-600"}`,children:["$",t.walletBalance]})]}),e.jsx(p,{className:"h-8 w-8 text-blue-600"})]})}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-4 border border-purple-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-purple-700 font-medium uppercase tracking-wide",children:"Next Billing"}),e.jsx("p",{className:"text-lg font-bold text-purple-800 mt-1",children:t.nextBillingDate?g(t.nextBillingDate):"N/A"})]}),e.jsx(C,{className:"h-8 w-8 text-purple-600"})]})})]}),t.walletBalance<t.membershipFee&&e.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 rounded-xl p-4 mb-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(m,{className:"h-5 w-5 text-red-500 mr-3 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-red-800 text-sm",children:"Insufficient Balance"}),e.jsxs("p",{className:"text-red-700 text-sm mt-1",children:["Add $",t.membershipFee-t.walletBalance," ","more to"," ",t.subscriptionStatus!=="active"?"subscribe":"renew","."]})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[t.subscriptionStatus!=="active"?e.jsxs(d,{onClick:()=>{h(t),c("subscribe")},disabled:t.walletBalance<t.membershipFee,className:"flex-1",variant:"success",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Subscribe"]}):e.jsxs(d,{variant:"outline",onClick:()=>{h(t),c("renew")},disabled:t.walletBalance<t.membershipFee,className:"flex-1",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Renew Early"]}),e.jsxs(d,{variant:"ghost",onClick:()=>I("/dashboard/transactions"),className:"flex-1 sm:flex-initial",children:["View Transactions",e.jsx(q,{className:"h-4 w-4 ml-2"})]})]})]})]},t._id))})})]})})};export{K as default};
