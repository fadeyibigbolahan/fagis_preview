import{c as N,r as a,j as t,i as S,k,m as B}from"./index-DGx1GHu3.js";import{a as D,u as E,b as A,B as C}from"./button-53hxmjlt.js";import{c as V,d as H,a as O,b as L}from"./index-D7tdnoWl.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=N("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=N("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=N("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U=N("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);function G(e){const s=a.useRef({value:e,previous:e});return a.useMemo(()=>(s.current.value!==e&&(s.current.previous=s.current.value,s.current.value=e),s.current.previous),[e])}function X(e){const s=Z(e),r=a.forwardRef((o,n)=>{const{children:d,...u}=o,l=a.Children.toArray(d),p=l.find(Q);if(p){const f=p.props.children,h=l.map(m=>m===p?a.Children.count(f)>1?a.Children.only(null):a.isValidElement(f)?f.props.children:null:m);return t.jsx(s,{...u,ref:n,children:a.isValidElement(f)?a.cloneElement(f,void 0,h):null})}return t.jsx(s,{...u,ref:n,children:d})});return r.displayName=`${e}.Slot`,r}function Z(e){const s=a.forwardRef((r,o)=>{const{children:n,...d}=r;if(a.isValidElement(n)){const u=ee(n),l=Y(d,n.props);return n.type!==a.Fragment&&(l.ref=o?D(o,u):u),a.cloneElement(n,l)}return a.Children.count(n)>1?a.Children.only(null):null});return s.displayName=`${e}.SlotClone`,s}var J=Symbol("radix.slottable");function Q(e){return a.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===J}function Y(e,s){const r={...s};for(const o in s){const n=e[o],d=s[o];/^on[A-Z]/.test(o)?n&&d?r[o]=(...l)=>{const p=d(...l);return n(...l),p}:n&&(r[o]=n):o==="style"?r[o]={...n,...d}:o==="className"&&(r[o]=[n,d].filter(Boolean).join(" "))}return{...e,...r}}function ee(e){var o,n;let s=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(s=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,r=s&&"isReactWarning"in s&&s.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var te=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],I=te.reduce((e,s)=>{const r=X(`Primitive.${s}`),o=a.forwardRef((n,d)=>{const{asChild:u,...l}=n,p=u?r:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(p,{...l,ref:d})});return o.displayName=`Primitive.${s}`,{...e,[s]:o}},{}),P="Switch",[se,pe]=V(P),[re,ne]=se(P),R=a.forwardRef((e,s)=>{const{__scopeSwitch:r,name:o,checked:n,defaultChecked:d,required:u,disabled:l,value:p="on",onCheckedChange:f,form:h,...m}=e,[g,b]=a.useState(null),v=E(s,x=>b(x)),w=a.useRef(!1),i=g?h||!!g.closest("form"):!0,[c,y]=H({prop:n,defaultProp:d??!1,onChange:f,caller:P});return t.jsxs(re,{scope:r,checked:c,disabled:l,children:[t.jsx(I.button,{type:"button",role:"switch","aria-checked":c,"aria-required":u,"data-state":K(c),"data-disabled":l?"":void 0,disabled:l,value:p,...m,ref:v,onClick:O(e.onClick,x=>{y(j=>!j),i&&(w.current=x.isPropagationStopped(),w.current||x.stopPropagation())})}),i&&t.jsx(z,{control:g,bubbles:!w.current,name:o,value:p,checked:c,required:u,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});R.displayName=P;var T="SwitchThumb",_=a.forwardRef((e,s)=>{const{__scopeSwitch:r,...o}=e,n=ne(T,r);return t.jsx(I.span,{"data-state":K(n.checked),"data-disabled":n.disabled?"":void 0,...o,ref:s})});_.displayName=T;var oe="SwitchBubbleInput",z=a.forwardRef(({__scopeSwitch:e,control:s,checked:r,bubbles:o=!0,...n},d)=>{const u=a.useRef(null),l=E(u,d),p=G(r),f=L(s);return a.useEffect(()=>{const h=u.current;if(!h)return;const m=window.HTMLInputElement.prototype,b=Object.getOwnPropertyDescriptor(m,"checked").set;if(p!==r&&b){const v=new Event("click",{bubbles:o});b.call(h,r),h.dispatchEvent(v)}},[p,r,o]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:l,style:{...n.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});z.displayName=oe;function K(e){return e?"checked":"unchecked"}var M=R,ae=_;const $=a.forwardRef(({className:e,...s},r)=>t.jsx(M,{className:A("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:r,children:t.jsx(ae,{className:A("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));$.displayName=M.displayName;const ie=({open:e,onClose:s,onConfirm:r,title:o,message:n})=>e?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50 p-3",children:t.jsxs("div",{className:"bg-white rounded-md p-6 md:w-[300px] w-full shadow-lg flex flex-col justify-center items-center gap-5",children:[t.jsx("div",{className:"flex justify-center items-center w-[100px] h-[100px] bg-red-600/50 rounded-full",children:t.jsx("div",{className:"flex justify-center items-center w-[70px] h-[70px] bg-red-600 rounded-full",children:t.jsx(F,{color:"white",size:40})})}),t.jsx("h2",{className:"text-2xl font-semibold text-red-600",children:o||"Are you sure?"}),t.jsx("p",{className:"text-sm text-gray-600 text-center",children:n}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx(C,{variant:"ghost",onClick:s,children:"Cancel"}),t.jsx(C,{variant:"destructive",onClick:r,children:"Confirm"})]})]})}):null,ce=({orgId:e})=>{const[s,r]=a.useState([]),[o,n]=a.useState(!1),[d,u]=a.useState(null),[l,p]=a.useState(!1),[f,h]=a.useState(null),m=async()=>{const i=localStorage.getItem("authToken");try{const c=await S.get(`${k}organizations/${e}/api-keys`,{headers:{Authorization:i}});console.log("Fetched API Keys:",c.data),r(c.data.apiKeys||[])}catch(c){console.error(c)}};a.useEffect(()=>{console.log("API Keys:",s)},[s]);const g=async()=>{const i=localStorage.getItem("authToken");try{n(!0);const c=await S.post(`${k}organizations/${e}/api-keys`,{},{headers:{Authorization:i}});r(y=>[...y,c.data.apiKey])}catch(c){console.error(c)}finally{n(!1)}},b=async(i,c)=>{const y=localStorage.getItem("authToken");try{await S.patch(`${k}organizations/${e}/api-keys/${i}/toggle`,{active:!c},{headers:{Authorization:y}}),r(x=>x.map(j=>j._id===i?{...j,active:!c}:j))}catch(x){console.error(x)}},v=async()=>{const i=localStorage.getItem("authToken");try{await S.delete(`${k}organizations/${e}/api-keys/${f}`,{headers:{Authorization:i}}),r(c=>c.filter(y=>y._id!==f)),h(null),p(!1)}catch(c){console.error(c)}},w=(i,c)=>{navigator.clipboard.writeText(i),u(c),console.log("Copied key:",i),setTimeout(()=>u(null),2e3)};return a.useEffect(()=>{m()},[]),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"w-full mx-auto mt-6 p-4 bg-[#F5F8FA] rounded-md",children:[t.jsxs("div",{className:"flex flex-row flex-wrap w-full items-center justify-between mb-4",children:[t.jsx("h2",{className:"text-sm font-bold",children:"API Key Management"}),t.jsx(C,{onClick:g,disabled:o,className:"text-xs",children:o?"Generating...":"Add API Key"})]}),t.jsx("div",{className:"mt-6 space-y-4",children:s.length===0?t.jsx("p",{className:"text-sm text-gray-500",children:"No API keys yet."}):s.map(i=>t.jsxs("div",{className:"p-3 border rounded-lg flex items-center justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 gap-2 flex flex-col",children:[t.jsx("p",{className:"font-mono text-sm break-all",children:i==null?void 0:i.key}),t.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(i==null?void 0:i.createdAt).toLocaleString()]})]}),t.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-2",children:[t.jsx($,{checked:i.active,onCheckedChange:()=>b(i._id,i.active)}),t.jsx(C,{size:"icon",variant:"ghost",onClick:()=>w(i.key,i._id),children:d===i._id?t.jsx(q,{size:16}):t.jsx(W,{size:16})}),t.jsx(C,{size:"icon",variant:"destructive",onClick:()=>{h(i._id),p(!0)},children:t.jsx(U,{size:16})})]})]},i._id))})]}),t.jsx(ie,{open:l,onClose:()=>p(!1),onConfirm:v,title:"Delete API Key",message:"This action cannot be undone. Are you sure you want to delete this API key?"})]})},fe=()=>{const{orgId:e}=B();return e?t.jsxs("div",{className:"md:p-6",children:[t.jsx("h2",{className:"font-kanit text-lg font-semibold text-gray-800 mb-4",children:"Manage API Keys"}),t.jsx(ce,{orgId:e})]}):t.jsx("p",{children:"Loading organization ID..."})};export{fe as default};
