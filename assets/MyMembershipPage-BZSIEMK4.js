import{c as we,r as l,j as e,R as Be,u as He,b as ie,C as ce,a as de,B as $e,W as Ve,i as me,k as ue,S as Xe}from"./index-CS7ZgHMT.js";import{n as Ye}from"./nodata-DkGH1G46.js";import{h as qe}from"./html2canvas.esm-Chigv41t.js";import{i as Je}from"./index.esm-CVZJPh_s.js";import{u as Ge,P as $,a as q,b as O,D as he,c as xe,d as fe,e as T}from"./dropdown-menu-CkwzdiRk.js";import{u as H,c as re,B as k}from"./button-CnXvB2RQ.js";import{c as Qe,a as W,u as Ke}from"./index-Dc-6mS6d.js";import{S as Ze}from"./search-CokmW1tD.js";import{E as pe}from"./ellipsis-vertical-HnfmiEW9.js";import{X as et}from"./x-Dwv1eVjA.js";import{U as ee}from"./user-D8vhwrcc.js";import{C as tt}from"./chevron-up-Cgd-W5_r.js";import{C as rt}from"./chevron-down-CFf_ZmAL.js";import"./chevron-right-DWZf5eQ0.js";import"./check-Duj1-6fA.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=we("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const be=we("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),st="/assets/BASIC-ChVTma_l.png",ot="/assets/SILVER-CfBLlB8V.png",nt="/assets/GOLD-CbzJNR1M.png",lt="/assets/VIP-Bj6D-hwB.png",at=({data:t})=>{var n,d,m;const o=l.useRef(null),[r,i]=l.useState(!1),a=async()=>{if(o.current){i(!0);try{const h=await qe(o.current,{useCORS:!0,allowTaint:!1,backgroundColor:null,scale:3,logging:!1,onclone:f=>{const x=f.getElementById("membershipCard");x&&(x.style.backgroundSize="contain",x.style.backgroundPosition="center")}}),u=document.createElement("a");u.download="membership-card.png",u.href=h.toDataURL("image/png",1),document.body.appendChild(u),u.click(),document.body.removeChild(u)}catch(h){console.error("Failed to capture card:",h)}finally{i(!1)}}},c=()=>{switch(t==null?void 0:t.membershipLevel){case"Basic":return st;case"Silver":return ot;case"Gold":return nt;default:return lt}};return e.jsxs("div",{className:"flex flex-col justify-center items-center gap-4",children:[e.jsxs("div",{id:"membershipCard",ref:o,style:{position:"relative",width:"300px",height:"180px",backgroundImage:`url(${c()})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",color:"white"},children:[e.jsxs("div",{className:"flex flex-row justify-center items-center gap-2",style:{position:"absolute",top:10,left:20},children:[e.jsx("div",{className:"flex justify-center items-center h-[25px] w-[25px]",children:e.jsx("img",{src:((n=t==null?void 0:t.organizationId)==null?void 0:n.logoUrl)||"",alt:"org-logo",className:"w-full h-full object-contain",crossOrigin:"anonymous",onError:h=>{h.target.style.display="none"}})}),e.jsx("p",{className:"font-semibold text-[10px]",children:((d=t==null?void 0:t.organizationId)==null?void 0:d.name)||""})]}),e.jsx("div",{style:{position:"absolute",top:70,right:12},children:e.jsx("p",{className:"text-[10px]",children:((m=t==null?void 0:t.userId)==null?void 0:m.fullName)||""})}),e.jsx("div",{style:{position:"absolute",bottom:58,right:12},children:e.jsx("p",{className:"text-[10px]",children:(t==null?void 0:t.membershipId)||""})}),e.jsx("img",{src:(t==null?void 0:t.qrCodeUrl)||"",alt:"QR Code",style:{position:"absolute",bottom:30,left:39,width:70,height:70},crossOrigin:"anonymous",onError:h=>{h.target.style.display="none"}})]}),e.jsx("button",{className:"rounded bg-[#003366] p-2 text-white hover:bg-[#7A54A1] flex justify-center items-center disabled:opacity-50",onClick:a,disabled:r,children:r?"Generating...":"Download Card"})]})};function it(t,[o,r]){return Math.min(r,Math.max(o,t))}function ct(t,o){return l.useReducer((r,i)=>o[r][i]??r,t)}var se="ScrollArea",[ve,Mt]=Qe(se),[dt,C]=ve(se),je=l.forwardRef((t,o)=>{const{__scopeScrollArea:r,type:i="hover",dir:a,scrollHideDelay:c=600,...n}=t,[d,m]=l.useState(null),[h,u]=l.useState(null),[f,x]=l.useState(null),[b,w]=l.useState(null),[z,I]=l.useState(null),[E,L]=l.useState(0),[F,D]=l.useState(0),[N,_]=l.useState(!1),[U,M]=l.useState(!1),p=H(o,S=>m(S)),v=Ge(a);return e.jsx(dt,{scope:r,type:i,dir:v,scrollHideDelay:c,scrollArea:d,viewport:h,onViewportChange:u,content:f,onContentChange:x,scrollbarX:b,onScrollbarXChange:w,scrollbarXEnabled:N,onScrollbarXEnabledChange:_,scrollbarY:z,onScrollbarYChange:I,scrollbarYEnabled:U,onScrollbarYEnabledChange:M,onCornerWidthChange:L,onCornerHeightChange:D,children:e.jsx($.div,{dir:v,...n,ref:p,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":F+"px",...t.style}})})});je.displayName=se;var Se="ScrollAreaViewport",ye=l.forwardRef((t,o)=>{const{__scopeScrollArea:r,children:i,nonce:a,...c}=t,n=C(Se,r),d=l.useRef(null),m=H(o,d,n.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),e.jsx($.div,{"data-radix-scroll-area-viewport":"",...c,ref:m,style:{overflowX:n.scrollbarXEnabled?"scroll":"hidden",overflowY:n.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:n.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});ye.displayName=Se;var A="ScrollAreaScrollbar",oe=l.forwardRef((t,o)=>{const{forceMount:r,...i}=t,a=C(A,t.__scopeScrollArea),{onScrollbarXEnabledChange:c,onScrollbarYEnabledChange:n}=a,d=t.orientation==="horizontal";return l.useEffect(()=>(d?c(!0):n(!0),()=>{d?c(!1):n(!1)}),[d,c,n]),a.type==="hover"?e.jsx(mt,{...i,ref:o,forceMount:r}):a.type==="scroll"?e.jsx(ut,{...i,ref:o,forceMount:r}):a.type==="auto"?e.jsx(Ne,{...i,ref:o,forceMount:r}):a.type==="always"?e.jsx(ne,{...i,ref:o}):null});oe.displayName=A;var mt=l.forwardRef((t,o)=>{const{forceMount:r,...i}=t,a=C(A,t.__scopeScrollArea),[c,n]=l.useState(!1);return l.useEffect(()=>{const d=a.scrollArea;let m=0;if(d){const h=()=>{window.clearTimeout(m),n(!0)},u=()=>{m=window.setTimeout(()=>n(!1),a.scrollHideDelay)};return d.addEventListener("pointerenter",h),d.addEventListener("pointerleave",u),()=>{window.clearTimeout(m),d.removeEventListener("pointerenter",h),d.removeEventListener("pointerleave",u)}}},[a.scrollArea,a.scrollHideDelay]),e.jsx(q,{present:r||c,children:e.jsx(Ne,{"data-state":c?"visible":"hidden",...i,ref:o})})}),ut=l.forwardRef((t,o)=>{const{forceMount:r,...i}=t,a=C(A,t.__scopeScrollArea),c=t.orientation==="horizontal",n=G(()=>m("SCROLL_END"),100),[d,m]=ct("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(d==="idle"){const h=window.setTimeout(()=>m("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(h)}},[d,a.scrollHideDelay,m]),l.useEffect(()=>{const h=a.viewport,u=c?"scrollLeft":"scrollTop";if(h){let f=h[u];const x=()=>{const b=h[u];f!==b&&(m("SCROLL"),n()),f=b};return h.addEventListener("scroll",x),()=>h.removeEventListener("scroll",x)}},[a.viewport,c,m,n]),e.jsx(q,{present:r||d!=="hidden",children:e.jsx(ne,{"data-state":d==="hidden"?"hidden":"visible",...i,ref:o,onPointerEnter:W(t.onPointerEnter,()=>m("POINTER_ENTER")),onPointerLeave:W(t.onPointerLeave,()=>m("POINTER_LEAVE"))})})}),Ne=l.forwardRef((t,o)=>{const r=C(A,t.__scopeScrollArea),{forceMount:i,...a}=t,[c,n]=l.useState(!1),d=t.orientation==="horizontal",m=G(()=>{if(r.viewport){const h=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;n(d?h:u)}},10);return B(r.viewport,m),B(r.content,m),e.jsx(q,{present:i||c,children:e.jsx(ne,{"data-state":c?"visible":"hidden",...a,ref:o})})}),ne=l.forwardRef((t,o)=>{const{orientation:r="vertical",...i}=t,a=C(A,t.__scopeScrollArea),c=l.useRef(null),n=l.useRef(0),[d,m]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),h=Ae(d.viewport,d.content),u={...i,sizes:d,onSizesChange:m,hasThumb:h>0&&h<1,onThumbChange:x=>c.current=x,onThumbPointerUp:()=>n.current=0,onThumbPointerDown:x=>n.current=x};function f(x,b){return gt(x,n.current,d,b)}return r==="horizontal"?e.jsx(ht,{...u,ref:o,onThumbPositionChange:()=>{if(a.viewport&&c.current){const x=a.viewport.scrollLeft,b=ge(x,d,a.dir);c.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollLeft=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollLeft=f(x,a.dir))}}):r==="vertical"?e.jsx(xt,{...u,ref:o,onThumbPositionChange:()=>{if(a.viewport&&c.current){const x=a.viewport.scrollTop,b=ge(x,d);c.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:x=>{a.viewport&&(a.viewport.scrollTop=x)},onDragScroll:x=>{a.viewport&&(a.viewport.scrollTop=f(x))}}):null}),ht=l.forwardRef((t,o)=>{const{sizes:r,onSizesChange:i,...a}=t,c=C(A,t.__scopeScrollArea),[n,d]=l.useState(),m=l.useRef(null),h=H(o,m,c.onScrollbarXChange);return l.useEffect(()=>{m.current&&d(getComputedStyle(m.current))},[m]),e.jsx(Ee,{"data-orientation":"horizontal",...a,ref:h,sizes:r,style:{bottom:0,left:c.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:c.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":J(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.x),onDragScroll:u=>t.onDragScroll(u.x),onWheelScroll:(u,f)=>{if(c.viewport){const x=c.viewport.scrollLeft+u.deltaX;t.onWheelScroll(x),Te(x,f)&&u.preventDefault()}},onResize:()=>{m.current&&c.viewport&&n&&i({content:c.viewport.scrollWidth,viewport:c.viewport.offsetWidth,scrollbar:{size:m.current.clientWidth,paddingStart:Y(n.paddingLeft),paddingEnd:Y(n.paddingRight)}})}})}),xt=l.forwardRef((t,o)=>{const{sizes:r,onSizesChange:i,...a}=t,c=C(A,t.__scopeScrollArea),[n,d]=l.useState(),m=l.useRef(null),h=H(o,m,c.onScrollbarYChange);return l.useEffect(()=>{m.current&&d(getComputedStyle(m.current))},[m]),e.jsx(Ee,{"data-orientation":"vertical",...a,ref:h,sizes:r,style:{top:0,right:c.dir==="ltr"?0:void 0,left:c.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":J(r)+"px",...t.style},onThumbPointerDown:u=>t.onThumbPointerDown(u.y),onDragScroll:u=>t.onDragScroll(u.y),onWheelScroll:(u,f)=>{if(c.viewport){const x=c.viewport.scrollTop+u.deltaY;t.onWheelScroll(x),Te(x,f)&&u.preventDefault()}},onResize:()=>{m.current&&c.viewport&&n&&i({content:c.viewport.scrollHeight,viewport:c.viewport.offsetHeight,scrollbar:{size:m.current.clientHeight,paddingStart:Y(n.paddingTop),paddingEnd:Y(n.paddingBottom)}})}})}),[ft,Ce]=ve(A),Ee=l.forwardRef((t,o)=>{const{__scopeScrollArea:r,sizes:i,hasThumb:a,onThumbChange:c,onThumbPointerUp:n,onThumbPointerDown:d,onThumbPositionChange:m,onDragScroll:h,onWheelScroll:u,onResize:f,...x}=t,b=C(A,r),[w,z]=l.useState(null),I=H(o,p=>z(p)),E=l.useRef(null),L=l.useRef(""),F=b.viewport,D=i.content-i.viewport,N=O(u),_=O(m),U=G(f,10);function M(p){if(E.current){const v=p.clientX-E.current.left,S=p.clientY-E.current.top;h({x:v,y:S})}}return l.useEffect(()=>{const p=v=>{const S=v.target;(w==null?void 0:w.contains(S))&&N(v,D)};return document.addEventListener("wheel",p,{passive:!1}),()=>document.removeEventListener("wheel",p,{passive:!1})},[F,w,D,N]),l.useEffect(_,[i,_]),B(w,U),B(b.content,U),e.jsx(ft,{scope:r,scrollbar:w,hasThumb:a,onThumbChange:O(c),onThumbPointerUp:O(n),onThumbPositionChange:_,onThumbPointerDown:O(d),children:e.jsx($.div,{...x,ref:I,style:{position:"absolute",...x.style},onPointerDown:W(t.onPointerDown,p=>{p.button===0&&(p.target.setPointerCapture(p.pointerId),E.current=w.getBoundingClientRect(),L.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),M(p))}),onPointerMove:W(t.onPointerMove,M),onPointerUp:W(t.onPointerUp,p=>{const v=p.target;v.hasPointerCapture(p.pointerId)&&v.releasePointerCapture(p.pointerId),document.body.style.webkitUserSelect=L.current,b.viewport&&(b.viewport.style.scrollBehavior=""),E.current=null})})})}),X="ScrollAreaThumb",Pe=l.forwardRef((t,o)=>{const{forceMount:r,...i}=t,a=Ce(X,t.__scopeScrollArea);return e.jsx(q,{present:r||a.hasThumb,children:e.jsx(pt,{ref:o,...i})})}),pt=l.forwardRef((t,o)=>{const{__scopeScrollArea:r,style:i,...a}=t,c=C(X,r),n=Ce(X,r),{onThumbPositionChange:d}=n,m=H(o,f=>n.onThumbChange(f)),h=l.useRef(void 0),u=G(()=>{h.current&&(h.current(),h.current=void 0)},100);return l.useEffect(()=>{const f=c.viewport;if(f){const x=()=>{if(u(),!h.current){const b=wt(f,d);h.current=b,d()}};return d(),f.addEventListener("scroll",x),()=>f.removeEventListener("scroll",x)}},[c.viewport,u,d]),e.jsx($.div,{"data-state":n.hasThumb?"visible":"hidden",...a,ref:m,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:W(t.onPointerDownCapture,f=>{const b=f.target.getBoundingClientRect(),w=f.clientX-b.left,z=f.clientY-b.top;n.onThumbPointerDown({x:w,y:z})}),onPointerUp:W(t.onPointerUp,n.onThumbPointerUp)})});Pe.displayName=X;var le="ScrollAreaCorner",Re=l.forwardRef((t,o)=>{const r=C(le,t.__scopeScrollArea),i=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&i?e.jsx(bt,{...t,ref:o}):null});Re.displayName=le;var bt=l.forwardRef((t,o)=>{const{__scopeScrollArea:r,...i}=t,a=C(le,r),[c,n]=l.useState(0),[d,m]=l.useState(0),h=!!(c&&d);return B(a.scrollbarX,()=>{var f;const u=((f=a.scrollbarX)==null?void 0:f.offsetHeight)||0;a.onCornerHeightChange(u),m(u)}),B(a.scrollbarY,()=>{var f;const u=((f=a.scrollbarY)==null?void 0:f.offsetWidth)||0;a.onCornerWidthChange(u),n(u)}),h?e.jsx($.div,{...i,ref:o,style:{width:c,height:d,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Y(t){return t?parseInt(t,10):0}function Ae(t,o){const r=t/o;return isNaN(r)?0:r}function J(t){const o=Ae(t.viewport,t.content),r=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=(t.scrollbar.size-r)*o;return Math.max(i,18)}function gt(t,o,r,i="ltr"){const a=J(r),c=a/2,n=o||c,d=a-n,m=r.scrollbar.paddingStart+n,h=r.scrollbar.size-r.scrollbar.paddingEnd-d,u=r.content-r.viewport,f=i==="ltr"?[0,u]:[u*-1,0];return Ie([m,h],f)(t)}function ge(t,o,r="ltr"){const i=J(o),a=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,c=o.scrollbar.size-a,n=o.content-o.viewport,d=c-i,m=r==="ltr"?[0,n]:[n*-1,0],h=it(t,m);return Ie([0,n],[0,d])(h)}function Ie(t,o){return r=>{if(t[0]===t[1]||o[0]===o[1])return o[0];const i=(o[1]-o[0])/(t[1]-t[0]);return o[0]+i*(r-t[0])}}function Te(t,o){return t>0&&t<o}var wt=(t,o=()=>{})=>{let r={left:t.scrollLeft,top:t.scrollTop},i=0;return function a(){const c={left:t.scrollLeft,top:t.scrollTop},n=r.left!==c.left,d=r.top!==c.top;(n||d)&&o(),r=c,i=window.requestAnimationFrame(a)}(),()=>window.cancelAnimationFrame(i)};function G(t,o){const r=O(t),i=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(i.current),[]),l.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,o)},[r,o])}function B(t,o){const r=O(o);Ke(()=>{let i=0;if(t){const a=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(r)});return a.observe(t),()=>{window.cancelAnimationFrame(i),a.unobserve(t)}}},[t,r])}var ke=je,vt=ye,jt=Re;const ze=l.forwardRef(({className:t,children:o,...r},i)=>e.jsxs(ke,{ref:i,className:re("relative overflow-hidden",t),...r,children:[e.jsx(vt,{className:"h-full w-full rounded-[inherit]",children:o}),e.jsx(Le,{}),e.jsx(jt,{})]}));ze.displayName=ke.displayName;const Le=l.forwardRef(({className:t,orientation:o="vertical",...r},i)=>e.jsx(oe,{ref:i,orientation:o,className:re("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...r,children:e.jsx(Pe,{className:"relative flex-1 rounded-full bg-border"})}));Le.displayName=oe.displayName;const De=Be.forwardRef(({className:t,type:o,...r},i)=>e.jsx("input",{type:o,className:re("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:i,...r}));De.displayName="Input";const Ot=()=>{var ae;const[t,o]=l.useState([]),[r,i]=l.useState([]),[a,c]=l.useState(!1),[n,d]=l.useState(null),[m,h]=l.useState("all"),[u,f]=l.useState(""),[x,b]=l.useState(window.innerWidth<768),[w,z]=l.useState({}),[I,E]=l.useState(""),[L,F]=l.useState(!1),[D,N]=l.useState(""),[_,U]=l.useState(null),M=l.useRef(null),p=He(),v=localStorage.getItem("authUser"),S=v?JSON.parse(v):null;l.useEffect(()=>{Je({environment:"sandbox",token:"test_d26be2bbdec495f9c195fa2b6b6"}).then(s=>{console.log("Paddle initialized:",s),U(s)}).catch(s=>{console.error("Failed to initialize Paddle:",s)})},[]),l.useEffect(()=>{const s=()=>b(window.innerWidth<768);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),l.useEffect(()=>{const s=g=>{M.current&&!M.current.contains(g.target)&&setOpenActionFor(null)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),l.useEffect(()=>{c(n!==null)},[n]),l.useEffect(()=>{(async()=>{try{const g=localStorage.getItem("authToken"),y=await me.get(`${ue}organizations`,{headers:{Authorization:g}});o(y.data)}catch(g){console.error("Failed to load memberships",g)}})()},[]),l.useEffect(()=>{const s=t.filter(g=>{const y=m==="all"||g.role===m,P=g.organizationId.name.toLowerCase().includes(u.toLowerCase())||g.userId.fullName.toLowerCase().includes(u.toLowerCase());return y&&P});i(s)},[t,m,u]);const V=s=>s?new Date(s).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",Q=s=>{switch(s){case"owner":return e.jsx(Xe,{className:"h-4 w-4 text-amber-600"});case"admin":return e.jsx(ee,{className:"h-4 w-4 text-blue-600"});case"member":return e.jsx(ee,{className:"h-4 w-4 text-gray-600"});default:return e.jsx(ee,{className:"h-4 w-4"})}},K=s=>{switch(s){case"owner":return"bg-amber-100 text-amber-800 border-amber-200";case"admin":return"bg-blue-100 text-blue-800 border-blue-200";case"member":return"bg-gray-100 text-gray-800 border-gray-200";default:return"bg-gray-100 text-gray-800"}},Z=s=>{switch(s){case"active":return"bg-green-100 text-green-800 border-green-200";case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"inactive":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},_e=s=>{z(g=>({...g,[s]:!g[s]}))},Me=async()=>{var y,P;if(!n){N("No membership selected");return}const s=parseFloat(I);if(!I||isNaN(s)||s<=0){N("Please enter a valid amount");return}const g=[5,10,20,50,100];if(!g.includes(s)){N(`Amount must be one of: $${g.join(", $")}`);return}F(!0),N("");try{const j=localStorage.getItem("authToken"),R=await me.post(`${ue}payments/wallet/topup`,{membershipId:n.membershipId,amount:s},{headers:{Authorization:j,"Content-Type":"application/json"}});if(R.data.success&&R.data.checkoutUrl){const{transactionId:Ue}=R.data;_.Checkout.open({transactionId:Ue})}else throw new Error(R.data.error||"Failed to initiate payment")}catch(j){console.error("Error initiating wallet top-up:",j),N(((P=(y=j.response)==null?void 0:y.data)==null?void 0:P.error)||j.message||"Failed to initiate wallet top-up")}finally{F(!1)}},Oe=()=>{p(`/dashboard/membership/${n.organizationId._id}/withdrawal`)},We=({amount:s,onClick:g,isSelected:y})=>e.jsxs("button",{type:"button",onClick:()=>g(s),className:`px-3 py-2 border rounded-lg text-sm font-medium transition-colors ${y?"bg-blue-100 border-blue-300 text-blue-700":"border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:["$",s]}),Fe=({membership:s})=>{var P,j;const g=w[s.membershipId],y=(j=(P=s.organizationId)==null?void 0:P.admins)==null?void 0:j.some(R=>R.userId===(S==null?void 0:S._id)&&R.role==="owner");return e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-4 shadow-sm",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.organizationId.logoUrl,alt:"Logo",className:"w-12 h-12 object-cover rounded-lg mr-3",onError:R=>{R.target.style.display="none",R.target.nextSibling.style.display="flex"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.organizationId.name}),e.jsx("p",{className:"text-xs text-gray-500",children:s.userId.fullName})]})]}),e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>_e(s.membershipId),className:"h-8 w-8",children:g?e.jsx(tt,{className:"h-4 w-4"}):e.jsx(rt,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"flex justify-between mt-3",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${K(s.role)}`,children:[Q(s.role),e.jsx("span",{className:"ml-1 capitalize",children:s.role})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Z(s.status)}`,children:s.status})]}),g&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"Joined"}),e.jsx("p",{className:"text-sm font-medium",children:V(s.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ID"}),e.jsx("p",{className:"text-xs font-medium truncate",children:s.membershipId})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsxs(he,{children:[e.jsx(xe,{asChild:!0,children:e.jsxs(k,{variant:"outline",size:"sm",className:"w-full",children:["Actions ",e.jsx(pe,{className:"ml-2 h-4 w-4"})]})}),e.jsxs(fe,{align:"end",className:"w-48",children:[y&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{onClick:()=>p(`/dashboard/membership/${s.organizationId._id}/view`),className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"})," Open Dashboard"]}),e.jsxs(T,{onClick:()=>p(`/dashboard/membership/create-event/${s.organizationId._id}`),className:"flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"})," Create Event"]})]}),e.jsxs(T,{onClick:()=>d(s),className:"flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2"})," View Details"]}),e.jsxs(T,{onClick:()=>p("/dashboard/transactions"),className:"flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-2"})," View Transactions"]})]})]})})]})]})};return e.jsxs("div",{className:"min-h-screen bg-white text-xs",children:[e.jsx("div",{className:"bg-white shadow-sm border-b p-4 md:p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Memberships"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage your organization memberships"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Ze,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx("input",{type:"text",placeholder:"Search organizations or members...",className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 w-full",value:u,onChange:s=>f(s.target.value)})]}),e.jsxs("select",{className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:m,onChange:s=>h(s.target.value),children:[e.jsx("option",{value:"all",children:"All Roles"}),e.jsx("option",{value:"owner",children:"Owner"}),e.jsx("option",{value:"admin",children:"Admin"}),e.jsx("option",{value:"member",children:"Member"})]})]})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto md:p-6",children:r.length>0?e.jsxs("div",{children:[x&&e.jsx("div",{className:"md:hidden",children:r.map(s=>e.jsx(Fe,{membership:s},s.membershipId))}),!x&&e.jsx("div",{className:"hidden md:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Organization"}),e.jsx("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Member"}),e.jsx("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Joined"}),e.jsx("th",{className:"p-4 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200",children:r.map(s=>{var y,P;const g=(P=(y=s.organizationId)==null?void 0:y.admins)==null?void 0:P.some(j=>j.userId===(S==null?void 0:S._id)&&j.role==="owner");return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("img",{src:s.organizationId.logoUrl,alt:"Logo",className:"w-10 h-10 object-cover rounded-lg mr-3",onError:j=>{j.target.style.display="none",j.target.nextSibling.style.display="flex"}}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.organizationId.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s.membershipId})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("p",{className:"text-gray-900",children:s.userId.fullName})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${K(s.role)}`,children:[Q(s.role),e.jsx("span",{className:"ml-1 capitalize",children:s.role})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Z(s.status)}`,children:s.status})}),e.jsx("td",{className:"p-4 text-sm text-gray-500",children:V(s.createdAt)}),e.jsx("td",{className:"p-4",children:e.jsxs(he,{children:[e.jsx(xe,{asChild:!0,children:e.jsx(k,{variant:"ghost",size:"icon",children:e.jsx(pe,{className:"w-5 h-5"})})}),e.jsxs(fe,{align:"end",className:"w-48",children:[g&&e.jsxs(e.Fragment,{children:[e.jsxs(T,{onClick:()=>p(`/dashboard/membership/${s.organizationId._id}/view`),className:"flex items-center",children:[e.jsx(ie,{className:"h-4 w-4 mr-2"})," ","Open Dashboard"]}),e.jsxs(T,{onClick:()=>p(`/dashboard/membership/create-event/${s.organizationId._id}`),className:"flex items-center",children:[e.jsx(ce,{className:"h-4 w-4 mr-2"})," ","Create Event"]})]}),e.jsxs(T,{onClick:()=>d(s),className:"flex items-center",children:[e.jsx(te,{className:"h-4 w-4 mr-2"})," ","View Details"]}),e.jsxs(T,{onClick:()=>p("/dashboard/transactions"),className:"flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-2"})," View Transactions"]})]})]})})]},s.membershipId)})})]})})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[e.jsx("img",{src:Ye,className:"w-[100%] md:w-1/3 mx-auto mb-6",alt:"No memberships"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No memberships found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:u||m!=="all"?"Try adjusting your search or filter criteria":"You haven't joined any organizations yet"}),(u||m!=="all")&&e.jsx(k,{onClick:()=>{f(""),h("all")},variant:"outline",children:"Clear Filters"})]})}),a&&n&&e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen p-4",children:[e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30",onClick:()=>d(null)}),e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-auto max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b flex-shrink-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Membership Details"}),e.jsx(k,{variant:"ghost",size:"icon",onClick:()=>d(null),children:e.jsx(et,{className:"h-5 w-5"})})]}),e.jsx(ze,{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-4 sm:p-5 md:p-6",children:[e.jsxs("div",{className:"flex flex-col items-center mb-4 sm:mb-5 md:mb-6",children:[e.jsx("div",{className:"w-16 h-16 sm:w-20 sm:h-20 md:w-24 md:h-24 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center mb-3",children:n.organizationId.logoUrl?e.jsx("img",{src:n.organizationId.logoUrl,alt:"Logo",className:"w-full h-full object-cover rounded-lg"}):e.jsx($e,{className:"h-8 w-8 sm:h-10 sm:w-10 md:h-12 md:w-12 text-white"})}),e.jsx("h4",{className:"text-xl font-bold text-gray-900 text-center",children:n.organizationId.name}),n.organizationId.description&&e.jsx("p",{className:"text-gray-600 text-center mt-1 sm:mt-2 text-sm sm:text-base max-w-2xl",children:n.organizationId.description}),e.jsxs("div",{className:"flex flex-wrap justify-center items-center mt-4 gap-2",children:[e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${K(n.role)} sm:text-sm`,children:[Q(n.role),e.jsx("span",{className:"ml-1 capitalize",children:n.role})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium border ${Z(n.status)} sm:text-sm`,children:n.status})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 sm:p-5 sm:mb-5 md:p-6 md:mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-5",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 md:text-xs",children:"Joined Date"}),e.jsx("p",{className:"font-medium sm:text-sm md:text-base",children:V(n.createdAt)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500 md:text-xs",children:"Membership ID"}),e.jsx("p",{className:"font-medium text-sm md:text-base truncate",children:n.membershipId})]}),n.organizationId.website&&e.jsxs("div",{className:"sm:col-span-2",children:[e.jsx("p",{className:"text-sm text-gray-500 md:text-xs",children:"Website"}),e.jsxs("a",{href:n.organizationId.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center text-sm md:text-base break-all",children:[n.organizationId.website,e.jsx(te,{className:"h-3 w-3 ml-1 flex-shrink-0 md:h-4 md:w-4"})]})]})]})}),e.jsx(at,{data:n}),e.jsx("div",{className:"mt-4 sm:mt-5 md:mt-6",children:e.jsxs("p",{className:"text-lg font-semibold text-center",children:["Wallet Balance: ",e.jsx("br",{}),e.jsxs("span",{className:"text-2xl text-green-600",children:["$",((ae=n==null?void 0:n.walletBalance)==null?void 0:ae.toLocaleString())||"0"]})]})}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg sm:p-5 md:p-6",children:[e.jsx("h5",{className:"font-medium text-blue-900 mb-3 sm:text-lg md:text-xl",children:"Fund Wallet"}),e.jsx("div",{className:"grid grid-cols-2 gap-2 mb-3 sm:grid-cols-3 md:grid-cols-5 md:gap-3",children:[5,10,20,50,100].map(s=>e.jsx(We,{amount:s,isSelected:parseFloat(I)===s,onClick:g=>{E(g.toString()),N("")}},s))}),e.jsx("div",{className:"flex flex-col gap-2 sm:flex-row sm:items-center",children:e.jsx(De,{type:"number",placeholder:"Enter amount",value:I,onChange:s=>{E(s.target.value),N("")},className:"flex-1",min:"1",step:"1"})}),D&&e.jsx("p",{className:"text-red-500 text-sm mt-2 md:text-xs",children:D}),e.jsx("p",{className:"text-xs text-gray-600 mt-2 md:text-xs",children:"Available amounts: $5, $10, $20, $50, $100"})]})]})}),e.jsxs("div",{className:"flex border-t p-4 gap-3 flex-shrink-0",children:[e.jsxs(k,{className:"flex-1",variant:"outline",children:[e.jsx(be,{className:"h-4 w-4 mr-2"})," Leave"]}),e.jsxs(k,{onClick:Me,disabled:L,className:"flex-1 bg-green-600",children:[e.jsx(Ve,{className:"h-4 w-4 mr-2"})," ",L?"Processing...":"Fund Wallet"]}),e.jsxs(k,{onClick:Oe,className:"flex-1 bg-red-600",children:[e.jsx(be,{className:"h-4 w-4 mr-2"})," ","Withdraw"]})]})]})]})})]})};export{Ot as default};
