import{c as q,r as l,u as Q,j as e,L as te,C as V,i as G,k as W,P as ae,U as B,t as K,M as re}from"./index-C--zS8iv.js";import{i as ne}from"./index.esm-CVZJPh_s.js";import{T as R,R as X}from"./triangle-alert-D_MJ9Nv7.js";import{B as ie}from"./building-2-_jfjI6V1.js";import{C as Z}from"./chevron-up-FBLA6ZR5.js";import{C as ee}from"./chevron-down-CJbgQUnq.js";import{C as le}from"./check-CZQ3J1X-.js";import{T as Y}from"./trending-up-Bmw74Bbu.js";import{T as ce}from"./trending-down-B0AkBYQH.js";import{F as de}from"./filter-CUAgbwJN.js";import{C as J}from"./circle-check-big-CJMzdRP9.js";import{C as F}from"./clock-Cy91qV8b.js";import{G as oe,B as xe}from"./globe-D1Tg4YXm.js";import{L as me}from"./link-DY97qZrb.js";import{E as he}from"./eye-Brj2jWfS.js";import{D as ge}from"./dollar-sign-D05JQUt-.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=q("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=q("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),be=({orgCount:b=0})=>{var j,_,H;const[a,h]=l.useState(null),[P,u]=l.useState(!0),[y,f]=l.useState(null),[w,M]=l.useState(b),[N,S]=l.useState(!1),[p,U]=l.useState(!1),[$,v]=l.useState(!1),[z,D]=l.useState(null);Q(),l.useEffect(()=>{ne({environment:"sandbox",token:"test_d26be2bbdec495f9c195fa2b6b6"}).then(t=>{console.log("Paddle initialized:",t),D(t)}).catch(t=>{console.error("Failed to initialize Paddle:",t)})},[]),l.useEffect(()=>{M(b)},[b]);const I=async()=>{var t,i,x,m;if(a!=null&&a.moduleKey){U(!0),f(null);try{const o=localStorage.getItem("authToken"),O=await G.post(`${W}subscriptions/renew/module`,{moduleKey:a.moduleKey},{headers:{Authorization:o}});console.log("Renewal response:",O.data),O.data.transactionId&&z?z.Checkout.open({transactionId:O.data.transactionId,successCallback:se=>{console.log("Renewal successful:",se)},closeCallback:()=>{console.log("Checkout closed")}}):f("Failed to initiate renewal. Please try again.")}catch(o){console.error("Renewal failed:",o);const O=((i=(t=o==null?void 0:o.response)==null?void 0:t.data)==null?void 0:i.error)||((m=(x=o==null?void 0:o.response)==null?void 0:x.data)==null?void 0:m.message)||"Renewal failed. Please try again.";f(O)}finally{U(!1),v(!1)}}},k=()=>{f(null),v(!0)},T=()=>{v(!1)};l.useEffect(()=>{(async()=>{var i,x;try{const m=localStorage.getItem("authToken"),o=await G.get(`${W}organizations/user-subscription/admin-organization`,{headers:{Authorization:m}});h(o.data),console.log("API Response:",o.data)}catch(m){console.error("Failed to fetch subscription:",m),f(((x=(i=m==null?void 0:m.response)==null?void 0:i.data)==null?void 0:x.message)||"Error fetching subscription")}finally{u(!1)}})()},[]);const L=t=>{if(!t)return 0;const i=new Date,m=new Date(t)-i;return Math.ceil(m/(1e3*60*60*24))},s=t=>{switch(t==null?void 0:t.toLowerCase()){case"basic":return"from-gray-500 to-gray-700";case"pro":return"from-blue-500 to-blue-700";case"enterprise":return"from-purple-500 to-purple-700";default:return"from-blue-500 to-blue-700"}},r=()=>{var i,x;const t=((x=(i=a==null?void 0:a.planDetails)==null?void 0:i.features)==null?void 0:x.maxOrganizations)||0;return t>0?w/t*100:0},d=t=>(t==null?void 0:t.charAt(0).toUpperCase())+(t==null?void 0:t.slice(1))||"Basic",g=()=>{var t,i;return((i=(t=a==null?void 0:a.planDetails)==null?void 0:t.pricing)==null?void 0:i["1"])||0},n=()=>{var x;const t=[],i=((x=a==null?void 0:a.planDetails)==null?void 0:x.features)||{};return i.maxOrganizations&&t.push(`Up to ${i.maxOrganizations} organizations`),i.allowCustomBranding&&t.push("Custom branding"),i.advancedAnalytics&&t.push("Advanced analytics"),i.prioritySupport&&t.push("Priority support"),t.push("Basic admin tools"),t};if(P)return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})});if(y||!a)return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center p-4 text-center",children:[e.jsx(R,{className:"h-12 w-12 text-red-400 mb-3"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:"Subscription Error"}),e.jsx("p",{className:"text-gray-600 mb-4",children:y||"Failed to load subscription data"}),e.jsx(te,{to:"/admin-organization",children:e.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Get Started"})})]})});const c=L(a==null?void 0:a.nextBillingDate),C=r(),E=((_=(j=a==null?void 0:a.planDetails)==null?void 0:j.features)==null?void 0:_.maxOrganizations)||0,A=a.isActive&&a.status==="active";return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 md:p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-10 h-10 md:w-12 md:h-12 bg-gradient-to-br ${s(a.package)} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx(ue,{className:"h-5 w-5 md:h-6 md:w-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg md:text-xl font-semibold text-gray-900",children:[d(a.package)," Plan"]}),e.jsxs("p",{className:"text-gray-600",children:["$",g(),"/month"]})]})]}),e.jsxs("div",{className:"text-left md:text-right",children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Current Status"}),e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs md:text-sm font-medium ${A?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:A?"Active":"Inactive"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 md:gap-6 mb-6",children:[e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(ie,{className:"h-4 w-4"}),e.jsx("span",{children:"Organizations"})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[w," of ",E]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${C>=80?"bg-red-500":C>=60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${Math.min(C,100)}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[Math.max(E-w,0)," organizations remaining"]})]}),e.jsxs("div",{className:"space-y-3 p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(V,{className:"h-4 w-4"}),e.jsx("span",{children:"Next Billing"})]}),e.jsx("span",{className:"text-sm text-gray-600",children:a.nextBillingDate?new Date(a.nextBillingDate).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("p",{className:`text-base md:text-lg font-semibold ${c<=7?"text-red-600":c<=30?"text-yellow-600":"text-green-600"}`,children:c>0?`${c} days remaining`:"Expired"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Auto-renewal enabled"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{className:"flex items-center justify-between w-full md:hidden p-3 bg-gray-50 rounded-lg",onClick:()=>S(!N),children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700",children:"Plan Features"}),N?e.jsx(Z,{className:"h-4 w-4"}):e.jsx(ee,{className:"h-4 w-4"})]}),e.jsx("h4",{className:"hidden md:block text-sm font-medium text-gray-700 mb-2",children:"Plan Features"}),e.jsxs("div",{className:`${N?"block":"hidden"} md:block`,children:[e.jsx("div",{className:"flex flex-wrap gap-2 mt-2 md:mt-0",children:n().map((t,i)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-blue-50 text-blue-700",children:[e.jsx(le,{className:"h-3 w-3 mr-1"}),t]},i))}),((H=a.planDetails)==null?void 0:H.description)&&e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:a.planDetails.description})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:$?e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-blue-50 rounded-lg border border-blue-200 w-full",children:[e.jsx("span",{className:"text-sm text-blue-800 flex-1",children:"Confirm renewal?"}),e.jsx("button",{onClick:I,disabled:p,className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 disabled:opacity-50",children:p?"Processing...":"Yes"}),e.jsx("button",{onClick:T,disabled:p,className:"px-3 py-1 bg-gray-300 text-gray-700 text-sm rounded hover:bg-gray-400",children:"Cancel"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:k,disabled:p||!(a!=null&&a.moduleKey),className:"flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex-1 sm:flex-none disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(X,{className:"h-4 w-4"}),e.jsx("span",{children:"Renew Plan"})]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex-1 sm:flex-none",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsx("span",{children:"Upgrade"})]}),e.jsxs("button",{className:"flex items-center justify-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors flex-1 sm:flex-none",children:[e.jsx(ce,{className:"h-4 w-4"}),e.jsx("span",{children:"Downgrade"})]})]})}),c<=30&&!$&&e.jsxs("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-start gap-3 mb-2",children:[e.jsx(R,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}),e.jsxs("p",{className:"text-sm text-yellow-800 flex-1",children:[e.jsx("strong",{children:"Expiring Soon:"})," Your subscription"," ",c>0?`expires in ${c} day${c!==1?"s":""}.`:"has expired."," ","Renew now to avoid service interruption."]})]}),e.jsx("button",{onClick:k,disabled:p,className:"w-full sm:w-auto px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700 transition-colors disabled:opacity-50",children:p?"Processing...":"Renew Now"})]}),y&&e.jsx("div",{className:"mt-4 p-3 bg-red-50 border border-red-200 rounded-lg",children:e.jsx("p",{className:"text-sm text-red-800",children:y})})]})},De=()=>{const[b,a]=l.useState(null),[h,P]=l.useState("all"),[u,y]=l.useState([]),[f,w]=l.useState(!0),[M,N]=l.useState(null),[S,p]=l.useState(!1),[U,$]=l.useState(window.innerWidth<768),v=Q();l.useEffect(()=>{const s=()=>{$(window.innerWidth<768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),l.useEffect(()=>{(async()=>{try{w(!0);const r=localStorage.getItem("authToken"),g=(await G.get(`${W}org/owned`,{headers:{Authorization:r}})).data.map(n=>{var c,C,E,A;return{id:n._id,name:n.name,type:"Organization",members:0,status:((c=n.subscription)==null?void 0:c.status)==="active"?"active":"inactive",subscriptionEnd:n.trialEndsAt?new Date(n.trialEndsAt).toISOString().split("T")[0]:"N/A",subscriptionPlan:((C=n.subscription)==null?void 0:C.plan)||"free",description:n.description,website:n.website,isPublic:n.isPublic,joinCode:n.joinCode,logoUrl:n.logoUrl,modules:((E=n.subscribedModules)==null?void 0:E.map(j=>({name:j.name||"Unknown Module",status:j.status||"active",expires:j.expiresAt?new Date(j.expiresAt).toISOString().split("T")[0]:n.trialEndsAt?new Date(n.trialEndsAt).toISOString().split("T")[0]:"N/A"})))||[{name:"Admin & Organization",status:((A=n.subscription)==null?void 0:A.status)==="active"?"active":"trial",expires:n.trialEndsAt?new Date(n.trialEndsAt).toISOString().split("T")[0]:"N/A"}]}});y(g),N(null)}catch(r){console.error("Error fetching organizations:",r),N("Failed to fetch organizations")}finally{w(!1)}})()},[]);const z={"Admin & Organization":K,"Event & Scheduling":V,"Education & Upskilling":xe,"Marketing & Communication":re,"Finance & Payment":ge,"Member Engagement":B,"Data & Analytics":Y},D=s=>{switch(s){case"active":return"text-green-700 bg-green-100 border-green-200";case"trial":return"text-blue-700 bg-blue-100 border-blue-200";case"expiring":return"text-amber-700 bg-amber-100 border-amber-200";case"expired":case"inactive":return"text-red-700 bg-red-100 border-red-200";default:return"text-gray-700 bg-gray-100 border-gray-200"}},I=s=>{switch(s){case"active":return J;case"trial":return F;case"expiring":return F;case"expired":case"inactive":return R;default:return F}},k=s=>{if(!s||s==="N/A")return 0;const r=new Date,g=new Date(s)-r;return Math.ceil(g/(1e3*60*60*24))},T=u.filter(s=>h==="all"?!0:h==="expiring"?s.modules.some(r=>{const d=k(r.expires);return d>0&&d<=30}):s.modules.some(r=>r.status===h)),L=()=>{window.location.reload()};return f?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your organizations..."})]})}):M?e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"text-center max-w-md",children:[e.jsx(R,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Something went wrong"}),e.jsx("p",{className:"text-gray-600 mb-4",children:M}),e.jsxs("button",{onClick:L,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{children:e.jsx(be,{orgCount:u.length})}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"My Organizations"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Manage all your organizations in one place"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("button",{className:"sm:hidden flex items-center justify-between w-full px-4 py-2 bg-white border border-gray-300 rounded-lg",onClick:()=>p(!S),children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(de,{className:"h-4 w-4 mr-2"}),"Filter Organizations"]}),S?e.jsx(Z,{className:"h-4 w-4"}):e.jsx(ee,{className:"h-4 w-4"})]}),e.jsx("div",{className:`${S?"block":"hidden"} sm:block`,children:e.jsxs("select",{className:"w-full sm:w-auto px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",value:h,onChange:s=>P(s.target.value),children:[e.jsx("option",{value:"all",children:"All Organizations"}),e.jsx("option",{value:"active",children:"Active"}),e.jsx("option",{value:"trial",children:"Trial"}),e.jsx("option",{value:"expiring",children:"Expiring Soon"}),e.jsx("option",{value:"expired",children:"Expired"}),e.jsx("option",{value:"inactive",children:"Inactive"})]})}),e.jsxs("button",{className:"flex items-center justify-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",onClick:()=>v("/organizations/create"),children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"New Organization"]})]})]})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Organizations"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:u.length})]}),e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(B,{className:"h-5 w-5 text-blue-600"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Modules"}),e.jsx("p",{className:"text-2xl font-bold text-green-700",children:u.reduce((s,r)=>s+r.modules.filter(d=>d.status==="active").length,0)})]}),e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(J,{className:"h-5 w-5 text-green-600"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Trial/Expiring"}),e.jsx("p",{className:"text-2xl font-bold text-amber-700",children:u.reduce((s,r)=>s+r.modules.filter(d=>d.status==="trial"||d.status==="expiring").length,0)})]}),e.jsx("div",{className:"p-2 bg-amber-100 rounded-lg",children:e.jsx(F,{className:"h-5 w-5 text-amber-600"})})]})}),e.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Active Orgs"}),e.jsx("p",{className:"text-2xl font-bold text-purple-700",children:u.filter(s=>s.status==="active").length})]}),e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(Y,{className:"h-5 w-5 text-purple-600"})})]})})]}),e.jsx("div",{className:"space-y-4",children:T.length===0?e.jsxs("div",{className:"text-center py-12 bg-white rounded-xl shadow-sm border border-gray-200",children:[e.jsx(B,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No organizations found"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:h==="all"?"You don't have any organizations yet. Create your first organization to get started.":`No organizations match the "${h}" filter. Try a different filter.`}),h!=="all"&&e.jsx("button",{className:"mt-4 px-4 py-2 text-blue-600 hover:text-blue-800",onClick:()=>P("all"),children:"Clear filters"})]}):T.map(s=>e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0",children:s.logoUrl?e.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-full h-full object-cover",onError:r=>{r.target.style.display="none",r.target.nextSibling.style.display="flex"}}):e.jsx("span",{className:"text-white font-bold text-lg",children:s.name.charAt(0)})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-gray-600 text-sm",children:[s.subscriptionPlan.charAt(0).toUpperCase()+s.subscriptionPlan.slice(1)," ","Plan",s.joinCode&&` • Join Code: ${s.joinCode}`]}),s.description&&e.jsx("p",{className:"text-gray-500 text-sm mt-1 line-clamp-1",children:s.description})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>v(`/dashboard/membership/${s.id}/view`),className:"px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm whitespace-nowrap",children:"Dashboard"}),e.jsx("button",{onClick:()=>a(b===s.id?null:s.id),className:"px-3 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm whitespace-nowrap",children:b===s.id?"Hide":"Details"})]})})]}),e.jsx("div",{className:"flex overflow-x-auto gap-2 mb-4 pb-2 -mx-1 px-1 scrollbar-hide",children:s.modules.map((r,d)=>{const g=z[r.name]||K,n=I(r.status);return e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gray-50 rounded-full border border-gray-200 whitespace-nowrap flex-shrink-0",children:[e.jsx(g,{className:"h-3.5 w-3.5 text-gray-600"}),e.jsx("span",{className:"text-xs text-gray-700",children:r.name}),e.jsx(n,{className:`h-3 w-3 ${D(r.status).split(" ")[0]}`})]},d)})}),b===s.id&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-4",children:"Module Details"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:s.modules.map((r,d)=>{const g=z[r.name]||K,n=I(r.status),c=k(r.expires);return e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(g,{className:"h-4 w-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:r.name})]}),e.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium border ${D(r.status)}`,children:[e.jsx(n,{className:"h-3 w-3"}),e.jsx("span",{className:"capitalize",children:r.status})]})]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsxs("p",{children:["Expires:"," ",r.expires!=="N/A"?r.expires:"No expiry date"]}),r.expires!=="N/A"&&e.jsx("p",{className:`${c<=7?"text-red-600 font-medium":c<=30?"text-amber-600":"text-gray-600"}`,children:c>0?`${c} days remaining`:`Expired ${Math.abs(c)} days ago`})]})]},d)})}),e.jsxs("div",{className:"mt-6 pt-4 border-t",children:[e.jsx("h5",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Organization Details"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 text-sm",children:[s.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"h-4 w-4 text-gray-500"}),e.jsxs("a",{href:s.website.startsWith("http")?s.website:`https://${s.website}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1",children:[s.website.replace(/^https?:\/\//,""),e.jsx(me,{className:"h-3 w-3"})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:s.isPublic?e.jsxs(e.Fragment,{children:[e.jsx(he,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:"Public Organization"})]}):e.jsxs(e.Fragment,{children:[e.jsx(pe,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-700",children:"Private Organization"})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-700",children:"Join Code:"}),e.jsx("span",{className:"font-mono text-gray-800 bg-gray-100 px-2 py-1 rounded text-xs",children:s.joinCode})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-700",children:"Plan:"}),e.jsx("span",{className:"text-gray-800 capitalize",children:s.subscriptionPlan})]})]})]})]})]})},s.id))})]})]})};export{De as default};
