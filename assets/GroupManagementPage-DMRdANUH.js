import{c as Te,m as Pe,r as l,u as $e,i as C,k as S,j as e,P as De,U as Le,M as W,t as Ge}from"./index-MVzjul59.js";import{S as M}from"./search-BHI-BYZk.js";import{F as Oe}from"./filter-CpqpTNzq.js";import{C as Ie}from"./chevron-down-DX1iHJJR.js";import{E as Fe}from"./ellipsis-vertical-DY3ywLPg.js";import{E as Re}from"./eye-BOZqw3Qn.js";import{S as Ve}from"./square-pen-NGExb_mP.js";import{C as qe}from"./calendar-plus-BmutI5JY.js";import{D as Z}from"./dollar-sign-Wf4Na4Ns.js";import{T as Ue}from"./trash-2-Dx0YUyT3.js";import{X as Be}from"./x-a-M4MkzN.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=Te("ShieldHalf",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 22V2",key:"zs6s6o"}]]),k=({isOpen:p,onClose:D,title:y,children:a})=>p?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"flex justify-between items-center p-6 border-b",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-800",children:y}),e.jsx("button",{onClick:D,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(Be,{size:24})})]}),e.jsx("div",{className:"p-6",children:a})]})}):null,rs=()=>{const{orgId:p}=Pe(),[D,y]=l.useState([]),[a,f]=l.useState(null),[ee,z]=l.useState(!1),[se,E]=l.useState(!1),[te,V]=l.useState(!1),[ae,q]=l.useState(!1),[re,A]=l.useState(!1),[le,_]=l.useState(!1),[x,i]=l.useState(!1),[T,ne]=l.useState(""),[L,c]=l.useState(null);l.useState({});const[U,oe]=l.useState({top:0,left:0}),[u,j]=l.useState({subject:"",message:"",recipients:[]}),[g,N]=l.useState({amount:"",reason:""}),[B,ie]=l.useState(!1),[ce,de]=l.useState("name"),[me,xe]=l.useState("asc"),H=l.useRef(null),ue=$e();l.useEffect(()=>{const s=t=>{H.current&&!H.current.contains(t.target)&&c(null)};return document.addEventListener("mousedown",s),()=>{document.removeEventListener("mousedown",s)}},[]);const pe=(s,t)=>{if(L!==s&&(t!=null&&t.currentTarget)){const r=t.currentTarget.getBoundingClientRect();oe({top:r.bottom+window.scrollY+4,left:r.right+window.scrollX-220})}c(L===s?null:s)},[G,ge]=l.useState([]),[d,m]=l.useState({name:"",description:"",type:"department",members:[]}),[h,P]=l.useState(""),[$,X]=l.useState(""),v=G.filter(s=>s.fullName.toLowerCase().includes(h.toLowerCase())||s.email.toLowerCase().includes(h.toLowerCase())),Y=(a==null?void 0:a.members.filter(s=>{var n,o;const t=((n=s.userId)==null?void 0:n.fullName)||s.fullName||"",r=((o=s.userId)==null?void 0:o.email)||s.email||"";return t.toLowerCase().includes($.toLowerCase())||r.toLowerCase().includes($.toLowerCase())}))||[];l.useEffect(()=>{he(),be()},[]);const he=async()=>{i(!0);try{const s=localStorage.getItem("authToken"),{data:t}=await C.get(`${S}organizations/${p}/groups`,{headers:{Authorization:s}});console.log("available groups",t),y(t.groups)}catch(s){console.log("groups error:",s),alert("Error fetching groups: "+s.message)}finally{i(!1)}},be=async()=>{try{const s=localStorage.getItem("authToken"),{data:t}=await C.get(`${S}organizations/${p}/members`,{headers:{Authorization:s}});console.log("available members",t),ge(t.members)}catch(s){console.error(s),setError("Failed to fetch organization data")}},ye=async(s,t)=>{var r,n;i(!0);try{const o=localStorage.getItem("authToken"),b=await C.post(`${S}payments/group/${s}/payout`,{organizationId:p,amount:parseFloat(t.amount),reason:t.reason},{headers:{Authorization:o}});console.log("Payout successful:",b.data),_(!1),N({amount:"",reason:""}),alert(`Payout of ${t.amount} sent to all group members successfully!`)}catch(o){console.error("Error processing payout:",o),alert("Error processing payout: "+(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||o.message))}finally{i(!1)}},fe=async s=>{var t,r;i(!0);try{const n=localStorage.getItem("authToken"),b=(await C.post(`${S}organizations/${p}/groups`,{name:s.name,description:s.description,members:s.members,type:s.type||"department"},{headers:{Authorization:n}})).data.group;y(F=>[...F,b]),z(!1),w(),alert("Group created successfully!")}catch(n){console.error("Error creating group:",n),alert("Error creating group: "+(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||n.message))}finally{i(!1)}},je=async(s,t)=>{var r,n;console.log("Updating group:",s,t),i(!0);try{const o=localStorage.getItem("authToken"),{data:b}=await C.put(`${S}organizations/${s}`,t,{headers:{Authorization:o}});console.log("Group updated:",b),y(F=>F.map(R=>R._id===s?{...R,...b.group,members:G.filter(_e=>b.group.members.includes(_e._id))}:R)),console.log("available members after update:",G),E(!1),w(),alert("Group updated successfully!")}catch(o){console.error(o),alert("Error updating group: "+(((n=(r=o.response)==null?void 0:r.data)==null?void 0:n.message)||o.message))}finally{i(!1)}},Ne=async s=>{if(window.confirm("Are you sure you want to delete this group?")){i(!0);try{y(t=>t.filter(r=>r._id!==s)),alert("Group deleted successfully!")}catch(t){alert("Error deleting group: "+t.message)}finally{i(!1)}}},w=()=>{m({organizationId:"",name:"",description:"",type:"department",members:[]}),f(null),P("")},ve=s=>{s.preventDefault(),je(a._id,d)},we=s=>{s.preventDefault(),fe(d)},Ce=s=>{f(s),m({organizationId:s.organizationId._id,name:s.name,description:s.description||"",type:s.type,members:s.members.map(t=>t._id)}),E(!0)},J=s=>{f(s),m({...d,members:s.members.map(t=>t._id)}),V(!0)},Se=s=>{console.log("Viewing group:",s),f(s),q(!0)},ke=s=>{f(s),N({amount:"",reason:""}),_(!0)},O=s=>{m(t=>({...t,members:t.members.includes(s)?t.members.filter(r=>r!==s):[...t.members,s]}))},Me=s=>{s.preventDefault(),ye(a._id,g)},K=D.filter(s=>s.name.toLowerCase().includes(T.toLowerCase())||s.organizationId.name.toLowerCase().includes(T.toLowerCase())||s.type.toLowerCase().includes(T.toLowerCase())),Q=s=>{f(s),j({subject:"",message:"",recipients:s.members.map(t=>t._id)}),A(!0)},ze=async s=>{var t,r;i(!0);try{const n=localStorage.getItem("authToken"),o=await C.post(`${S}organizations/${p}/groups/${a._id}/send-message`,{subject:s.subject,message:s.message,recipients:s.recipients},{headers:{Authorization:n}});console.log("Message sent:",o.data),A(!1),I(),alert("Message sent successfully!")}catch(n){console.error("Error sending message:",n),alert("Error sending message: "+(((r=(t=n.response)==null?void 0:t.data)==null?void 0:r.message)||n.message))}finally{i(!1)}},I=()=>{j({subject:"",message:"",recipients:[]}),X("")},Ee=s=>{s.preventDefault(),ze(u)},Ae=s=>{j(t=>({...t,recipients:t.recipients.includes(s)?t.recipients.filter(r=>r!==s):[...t.recipients,s]}))};return e.jsx("div",{className:"bg-white min-h-screen text-xs",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Group Management"}),e.jsx("p",{className:"text-gray-600",children:"Manage organization groups, members, and permissions"})]}),e.jsx("div",{className:"mb-6 flex flex-col gap-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),e.jsx("input",{type:"text",placeholder:"Search groups...",value:T,onChange:s=>ne(s.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>ie(!B),className:"flex items-center gap-2 bg-white border border-gray-300 rounded-lg px-3 py-2 text-gray-700 hover:bg-gray-50",children:[e.jsx(Oe,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Filter & Sort"}),e.jsx(Ie,{size:16})]}),B&&e.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 z-10 p-3",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort by"}),e.jsxs("select",{value:ce,onChange:s=>de(s.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",children:[e.jsx("option",{value:"name",children:"Name"}),e.jsx("option",{value:"type",children:"Type"}),e.jsx("option",{value:"members",children:"Members"}),e.jsx("option",{value:"created",children:"Created Date"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),e.jsxs("select",{value:me,onChange:s=>xe(s.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm",children:[e.jsx("option",{value:"asc",children:"Ascending"}),e.jsx("option",{value:"desc",children:"Descending"})]})]})]})]}),e.jsxs("button",{onClick:()=>z(!0),className:"bg-blue-600 text-white px-3 sm:px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 whitespace-nowrap",children:[e.jsx(De,{size:16}),e.jsx("span",{className:"hidden sm:inline",children:"Create Group"}),e.jsx("span",{className:"sm:hidden",children:"Create"})]})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full min-w-max",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Group Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Organization"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Type"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Members"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Created"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider whitespace-nowrap",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"Loading groups..."})}):K.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500",children:"No groups found"})}):K.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),s.description&&e.jsx("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:s.description})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:s.organizationId.name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.type==="department"?"bg-blue-100 text-blue-800":s.type==="committee"?"bg-green-100 text-green-800":s.type==="circle"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:s.type})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[s.members.length," members"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(s.createdAt).toLocaleDateString()}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:"relative",children:e.jsx("button",{onClick:t=>pe(s._id,t),className:"flex items-center justify-center w-8 h-8 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-full transition-colors",title:"Actions",children:e.jsx(Fe,{size:16})})})})}),L===s._id&&e.jsx("div",{className:"fixed inset-0 z-50",onClick:()=>c(null),children:e.jsx("div",{className:"absolute w-64 bg-white rounded-md shadow-lg border border-gray-200",style:{top:U.top,left:U.left},onClick:t=>t.stopPropagation(),children:e.jsxs("div",{className:"py-1",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-0",children:[e.jsxs("button",{onClick:()=>{Se(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Re,{size:14,className:"mr-2 text-[#7A54A1]"}),"View Details"]}),e.jsxs("button",{onClick:()=>{Ce(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Ve,{size:14,className:"mr-2 text-[#7A54A1]"}),"Edit Group"]}),e.jsxs("button",{onClick:()=>{J(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Le,{size:14,className:"mr-2 text-[#7A54A1]"}),"Members"]}),e.jsxs("button",{onClick:()=>{ue(`/dashboard/membership/create-event/${p}/${s._id}`),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(qe,{size:14,className:"mr-2 text-[#7A54A1]"}),"Create Event"]}),e.jsxs("button",{onClick:()=>{Q(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(W,{size:14,className:"mr-2 text-[#7A54A1]"}),"Message"]}),e.jsxs("button",{onClick:()=>{ke(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Z,{size:14,className:"mr-2 text-[#7A54A1]"}),"Payout"]}),e.jsxs("button",{onClick:()=>{Q(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(He,{size:14,className:"mr-2 text-[#7A54A1]"}),"Permissions"]}),e.jsxs("button",{onClick:()=>{J(s),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-gray-700 hover:bg-gray-100 transition-colors",children:[e.jsx(Ge,{size:14,className:"mr-2 text-[#7A54A1]"}),"Settings"]})]}),e.jsx("hr",{className:"my-1"}),e.jsxs("button",{onClick:()=>{Ne(s._id),c(null)},className:"flex items-center w-full px-3 py-2 text-xs text-red-600 hover:bg-red-50 transition-colors",children:[e.jsx(Ue,{size:14,className:"mr-2"}),"Delete Group"]})]})})})]},s._id))})]})})}),e.jsx(k,{isOpen:ee,onClose:()=>{z(!1),w()},title:"Create New Group",children:e.jsxs("form",{onSubmit:we,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:s=>m(t=>({...t,name:s.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter group name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:s=>m(t=>({...t,description:s.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter group description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Type"}),e.jsxs("select",{value:d.type,onChange:s=>m(t=>({...t,type:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"department",children:"Department"}),e.jsx("option",{value:"committee",children:"Committee"}),e.jsx("option",{value:"circle",children:"Circle"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search members...",value:h,onChange:s=>P(s.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-transparent outline-none text-sm"})]})}),e.jsx("div",{className:"max-h-40 overflow-y-auto p-3",children:v.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:h?"No members found":"No members available"}):v.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:d.members.includes(s._id),onChange:()=>O(s._id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm",children:[s.fullName," (",s.email,")"]})]},s._id))})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:x,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:x?"Creating...":"Create Group"}),e.jsx("button",{type:"button",onClick:()=>{z(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),e.jsx(k,{isOpen:se,onClose:()=>{E(!1),w()},title:"Edit Group",children:e.jsxs("form",{onSubmit:ve,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Name *"}),e.jsx("input",{type:"text",value:d.name,onChange:s=>m(t=>({...t,name:s.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter group name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:d.description,onChange:s=>m(t=>({...t,description:s.target.value})),rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter group description"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Group Type"}),e.jsxs("select",{value:d.type,onChange:s=>m(t=>({...t,type:s.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",children:[e.jsx("option",{value:"department",children:"Department"}),e.jsx("option",{value:"committee",children:"Committee"}),e.jsx("option",{value:"circle",children:"Circle"}),e.jsx("option",{value:"custom",children:"Custom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Members"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search members...",value:h,onChange:s=>P(s.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-transparent outline-none text-sm"})]})}),e.jsx("div",{className:"max-h-40 overflow-y-auto p-3",children:v.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:h?"No members found":"No members available"}):v.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:d.members.includes(s._id),onChange:()=>O(s._id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm",children:[s.fullName," (",s.email,")"]})]},s._id))})]})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsx("button",{type:"submit",disabled:x,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:x?"Updating...":"Update Group"}),e.jsx("button",{type:"button",onClick:()=>{E(!1),w()},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),e.jsx(k,{isOpen:te,onClose:()=>V(!1),title:`Manage Members - ${a==null?void 0:a.name}`,children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Select Members"}),e.jsxs("div",{className:"border border-gray-300 rounded-lg",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search members...",value:h,onChange:s=>P(s.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-transparent outline-none text-sm"})]})}),e.jsx("div",{className:"max-h-60 overflow-y-auto p-3",children:v.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:h?"No members found":"No members available"}):v.map(s=>e.jsxs("label",{className:"flex items-center space-x-2 mb-3",children:[e.jsx("input",{type:"checkbox",checked:d.members.includes(s._id),onChange:()=>O(s._id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.fullName}),e.jsx("div",{className:"text-xs text-gray-500",children:s.email})]})]},s._id))})]})]})}),e.jsx(k,{isOpen:ae,onClose:()=>q(!1),title:"Group Details",children:a&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Group Name"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:a.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Organization"}),e.jsx("p",{className:"text-lg text-gray-900",children:a.organizationId.name})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-900",children:a.description||"No description provided"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Type"}),e.jsx("span",{className:`inline-flex px-3 py-1 text-sm font-semibold rounded-full ${a.type==="department"?"bg-blue-100 text-blue-800":a.type==="committee"?"bg-green-100 text-green-800":a.type==="circle"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:a.type})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"Created"}),e.jsx("p",{className:"text-gray-900",children:new Date(a.createdAt).toLocaleDateString()})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-500 mb-2",children:["Members (",a.members.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:a.members.length===0?e.jsx("p",{className:"text-gray-500 italic",children:"No members assigned"}):a.members.map(s=>{var t,r;return e.jsxs("div",{className:"flex items-center space-x-3 p-2 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-medium",children:(r=(t=s==null?void 0:s.userId)==null?void 0:t.fullName)==null?void 0:r.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.userId.fullName}),e.jsx("p",{className:"text-xs text-gray-500",children:s.userId.email})]})]},s._id)})})]})]})}),e.jsx(k,{isOpen:re,onClose:()=>{A(!1),I()},title:`Send Message - ${a==null?void 0:a.name}`,children:e.jsxs("form",{onSubmit:Ee,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Subject *"}),e.jsx("input",{type:"text",value:u.subject,onChange:s=>j(t=>({...t,subject:s.target.value})),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter message subject"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Message *"}),e.jsx("textarea",{value:u.message,onChange:s=>j(t=>({...t,message:s.target.value})),required:!0,rows:"6",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter your message"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Recipients (",u.recipients.length," selected)"]}),e.jsxs("div",{className:"border border-gray-300 rounded-lg",children:[e.jsx("div",{className:"p-3 border-b border-gray-200",children:e.jsxs("div",{className:"relative",children:[e.jsx(M,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search recipients...",value:$,onChange:s=>X(s.target.value),className:"pl-9 pr-3 py-2 w-full border border-gray-200 rounded-md focus:ring-1 focus:ring-blue-500 focus:border-transparent outline-none text-sm"})]})}),e.jsxs("div",{className:"max-h-40 overflow-y-auto p-3",children:[e.jsx("div",{className:"mb-2",children:e.jsx("button",{type:"button",onClick:()=>{const s=(a==null?void 0:a.members.map(t=>t._id))||[];j(t=>({...t,recipients:u.recipients.length===s.length?[]:s}))},className:"text-xs text-blue-600 hover:text-blue-800",children:u.recipients.length===(a==null?void 0:a.members.length)?"Deselect All":"Select All"})}),Y.length===0?e.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:$?"No recipients found":"No recipients available"}):Y.map(s=>{var t,r;return e.jsxs("label",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:u.recipients.includes(s._id),onChange:()=>Ae(s._id),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900",children:((t=s.userId)==null?void 0:t.fullName)||s.fullName}),e.jsx("div",{className:"text-xs text-gray-500",children:((r=s.userId)==null?void 0:r.email)||s.email})]})]},s._id)})]})]})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["This message will be sent as an email to"," ",u.recipients.length," recipient(s)."]})}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:x||u.recipients.length===0,className:"flex-1 bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(W,{size:16}),x?"Sending...":"Send Message"]}),e.jsx("button",{type:"button",onClick:()=>{A(!1),I()},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})}),e.jsx(k,{isOpen:le,onClose:()=>{_(!1),N({amount:"",reason:""})},title:`Payout Members - ${a==null?void 0:a.name}`,children:e.jsxs("form",{onSubmit:Me,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount per Member *"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx("span",{className:"text-gray-500",children:"$"})}),e.jsx("input",{type:"number",step:"0.01",min:"0.01",value:g.amount,onChange:s=>N(t=>({...t,amount:s.target.value})),required:!0,className:"pl-7 w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter amount"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason for Payout *"}),e.jsx("textarea",{value:g.reason,onChange:s=>N(t=>({...t,reason:s.target.value})),required:!0,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent outline-none",placeholder:"Enter reason for payout"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsxs("p",{className:"text-sm text-blue-600",children:[e.jsx("strong",{children:"Total Payout:"})," $",g.amount&&a?(parseFloat(g.amount)*a.members.length).toFixed(2):"0.00"," ","(",(a==null?void 0:a.members.length)||0," members × $",g.amount||"0.00",")"]}),e.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"This amount will be deducted from your wallet balance and distributed to all group members."})]}),e.jsxs("div",{className:"flex space-x-3 pt-4",children:[e.jsxs("button",{type:"submit",disabled:x||!g.amount||!g.reason,className:"flex-1 bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 disabled:opacity-50 transition-colors flex items-center justify-center gap-2",children:[e.jsx(Z,{size:16}),x?"Processing...":"Process Payout"]}),e.jsx("button",{type:"button",onClick:()=>{_(!1),N({amount:"",reason:""})},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})})]})})};export{rs as default};
