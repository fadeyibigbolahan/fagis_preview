import{u as p,j as g,y,i as b,k as m}from"./index-BwzBgxIE.js";const w=({email:e="",isPopular:r,amountInNaira:s=0,moduleKey:c="",duration:l=1,onSuccess:i=()=>{}})=>{const u=p(),d=()=>{var n;const a=`${c}_${l}_${Date.now()}`,o=Number(s)*100;if(!e||!e.includes("@"))return y.error("You need to authenticate before you proceed"),u("/signup");if(!o||o<100)return alert("Invalid amount. Must be more than $1");console.log("üì¶ Starting payment for",a),console.log("EMAIL:",e),console.log("AMOUNT:",o),((n=window.PaystackPop)==null?void 0:n.setup({key:"pk_test_90e41f418f094a8a03f096029d11c3bcc322e39b",email:e,amount:o,currency:"NGN",ref:a,callback:function(f){const h=localStorage.getItem("authToken");b.post(`${m}payments/verify`,{reference:f.reference},{headers:{Authorization:h}}).then(t=>{console.log("‚úÖ Payment verified:",t.data),i(t.data)}).catch(t=>{console.error("‚ùå Verification failed:",t),alert("Payment verified but backend failed to activate subscription.")})},onClose:function(){console.log("‚ùå Payment window closed.")}})).openIframe()};return g.jsx("button",{onClick:d,className:`w-full py-4 px-6 rounded-xl font-semibold transition-all duration-300 ${r?"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700 shadow-lg hover:shadow-xl":"bg-gray-100 text-gray-900 hover:bg-gray-200 hover:shadow-md"}`,children:"Get Started"})};export{w as P};
